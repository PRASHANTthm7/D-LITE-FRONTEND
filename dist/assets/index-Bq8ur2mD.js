import{r as e,a as t,R as s,L as r,u as n,b as a,B as o,c as i,d as l,N as d}from"./react-vendors-CUWDjJn3.js";import{a as c,c as m}from"./ui-BpG1hZod.js";import{l as u}from"./socket-DNoO1m3r.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var h={exports:{}},x={},g=e,p=Symbol.for("react.element"),f=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,b=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,s){var r,n={},a=null,o=null;for(r in void 0!==s&&(a=""+s),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(o=t.ref),t)v.call(t,r)&&!y.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:p,type:e,key:a,ref:o,props:n,_owner:b.current}}x.Fragment=f,x.jsx=j,x.jsxs=j,h.exports=x;var w=h.exports,N={},k=t;N.createRoot=k.createRoot,N.hydrateRoot=k.hydrateRoot;const C=new class{constructor(e="D-Lite"){this.prefix=e}getTimestamp(){return(new Date).toISOString()}formatLog(e,t,s={}){return{timestamp:this.getTimestamp(),level:e,message:t,...s}}error(e,t={}){this.formatLog("ERROR",e,t)}warn(e,t={}){this.formatLog("WARN",e,t)}info(e,t={}){this.formatLog("INFO",e,t)}debug(e,t={}){}}("D-Lite"),_=(e,t="API Call")=>{var s,r;if(e.response){const r=e.response.status,n=(null==(s=e.response.data)?void 0:s.message)||"An error occurred";return C.error(`${t}: Server Error ${r}`,{status:r,message:n,data:e.response.data}),{status:r,message:n,isClientError:r>=400&&r<500,isServerError:r>=500}}return e.request?(C.error(`${t}: No Response`,{message:"Server did not respond",URL:e.request.URL||(null==(r=e.config)?void 0:r.url)}),{status:null,message:"Server did not respond. Check your connection.",isClientError:!1,isServerError:!0}):(C.error(`${t}: Client Error`,{message:e.message}),{status:null,message:e.message||"An unexpected error occurred",isClientError:!0,isServerError:!1})},S=parseInt("30000"),L=c.create({baseURL:"http://localhost:3001",timeout:S,headers:{"Content-Type":"application/json"}});L.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),L.interceptors.response.use(e=>e,e=>{const t=_(e,"Auth Service");return Promise.reject(t)});const M=async(e,t,s)=>{var r,n;try{C.info("Attempting user registration",{username:e,email:t});const a=await L.post("/api/auth/register",{username:e,email:t,password:s});return C.info("Registration successful",{userId:null==(n=null==(r=a.data)?void 0:r.user)?void 0:n.id}),a.data}catch(a){throw C.error("Registration failed",{error:a.message}),a}},U=async(e,t)=>{var s,r;try{C.info("Attempting login",{email:e});const n=await L.post("/api/auth/login",{email:e,password:t});return C.info("Login successful",{userId:null==(r=null==(s=n.data)?void 0:s.user)?void 0:r.id}),n.data}catch(n){throw C.error("Login failed",{error:n.message}),n}},E=async()=>{try{C.debug("Verifying token");return(await L.get("/api/auth/verify")).data}catch(e){throw C.warn("Token verification failed",{error:e.message}),e}},A=async e=>{try{C.debug("Fetching user",{userId:e});return(await L.get(`/api/users/${e}`)).data}catch(t){throw C.error("Failed to fetch user",{userId:e,error:t.message}),t}},R=async e=>{try{C.debug("Searching users",{query:e});return(await L.get("/api/users/search",{params:{q:e}})).data}catch(t){throw C.error("Failed to search users",{query:e,error:t.message}),t}},I={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},T=["VITE_AUTH_SERVICE_URL","VITE_CHAT_SERVICE_URL","VITE_SOCKET_GATEWAY_URL"],D=()=>{const e=[];T.forEach(t=>{I[t]||e.push(t)}),e.length;return{isValid:0===e.length,missing:e,env:{AUTH_SERVICE_URL:"http://localhost:3001".trim().replace(/\/+$/,""),CHAT_SERVICE_URL:"http://localhost:8001".trim().replace(/\/+$/,""),SOCKET_GATEWAY_URL:((e,t)=>{let s;try{s=decodeURIComponent(e)}catch(n){s=e}s=s.trim().replace(/[,\s%]+/g,"").replace(/\/+$/,""),s=s.replace(/%[0-9A-Fa-f]{2}/g,"");const r=s.match(/^(https?:\/\/)?([^\/\s,]+)/);return r&&(s=(r[1]||"")+r[2]),s.match(/^https?:\/\//)||(s.includes("railway.app")||s.includes("netlify.app")||s.includes("vercel.app")||s.includes("render.com"),s=`https://${s}`),s||t})("http://localhost:3002","http://localhost:3002")}}},z=D(),$={auth:{baseURL:z.env.AUTH_SERVICE_URL,endpoints:{register:"/api/auth/register",login:"/api/auth/login",verify:"/api/auth/verify",logout:"/api/auth/logout",profile:"/api/auth/profile",users:"/api/users",userById:e=>`/api/users/${e}`,searchUsers:"/api/users/search",updateStatus:e=>`/api/users/${e}/status`},timeout:parseInt("30000")},chat:{baseURL:z.env.CHAT_SERVICE_URL,endpoints:{messages:"/api/messages",messagesBetween:(e,t)=>`/api/messages/${e}/${t}`,markRead:e=>`/api/messages/${e}/read`,deleteMessage:e=>`/api/messages/${e}`,conversations:e=>`/api/conversations/${e}`,groups:"/api/groups",userGroups:e=>`/api/groups/${e}`,groupDetail:e=>`/api/groups/detail/${e}`,groupMessages:e=>`/api/groups/${e}/messages`,addGroupMember:e=>`/api/groups/${e}/members`,removeGroupMember:(e,t)=>`/api/groups/${e}/members/${t}`},timeout:parseInt("30000")},socket:{baseURL:z.env.SOCKET_GATEWAY_URL,events:{connect:"connect",disconnect:"disconnect",connected:"connected",error:"error",userConnected:"user_connected",userDisconnected:"user_disconnected",onlineUsers:"online_users",getOnlineUsers:"get_online_users",sendMessage:"send_message",receiveMessage:"receive_message",messageSent:"message_sent",messageRead:"message_read",messageDelivered:"message_delivered",messageReadStatus:"message_read_status",messagesLoaded:"messages_loaded",getMessages:"get_messages",deleteMessage:"delete_message",messageDeleted:"message_deleted",typing:"typing",stopTyping:"stop_typing",userTyping:"user_typing",userStoppedTyping:"user_stopped_typing",joinRoom:"join_room",leaveRoom:"leave_room",roomJoined:"room_joined",roomLeft:"room_left",joinGroup:"join_group",leaveGroup:"leave_group",groupJoined:"group_joined",groupLeft:"group_left",userJoinedGroup:"user_joined_group",userLeftGroup:"user_left_group"},options:{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:5,timeout:2e4}}};const P=new class{constructor(){this.socket=null,this.isConnected=!1,this.listeners=new Map,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.connectingPromise=null,this.presenceTrackingSetup=!1}connect(e){var t;if((null==(t=this.socket)?void 0:t.connected)&&this.isConnected)return C.debug("Socket already connected"),Promise.resolve();if(this.connectingPromise)return C.debug("Connection already in progress"),this.connectingPromise;let s=$.socket.baseURL;if(!s)return C.error("Socket Gateway URL is not configured"),Promise.reject(new Error("Socket Gateway URL is not configured"));try{s=decodeURIComponent(s)}catch(n){C.warn("Failed to decode URL, using as-is",{url:s})}s=s.trim().replace(/[,\s%]+/g,"").replace(/%[0-9A-Fa-f]{2}/g,"").replace(/\/+$/,"");const r=s.match(/^(https?:\/\/)?([^\/\s,]+)/);if(r){const e=r[1]||"",t=r[2];s=e+t}return s.match(/^https?:\/\//)||(s=`https://${s}`),C.info("Socket Gateway URL normalized",{original:$.socket.baseURL,normalized:s}),this.connectingPromise=new Promise((t,r)=>{let n,a,o,i,l,d=!1;n=setTimeout(()=>{var e;(null==(e=this.socket)?void 0:e.connected)||d||(C.error("Socket connection timeout"),this.cleanupSocket(),this.connectingPromise=null,d=!0,r(new Error("Connection timeout: Unable to connect to socket server")))},$.socket.options.timeout);try{this.socket&&!this.socket.connected&&(C.debug("Cleaning up existing socket before reconnecting"),this.cleanupSocket()),C.info("Connecting to Socket Gateway",{url:s,hasToken:!!e,tokenLength:null==e?void 0:e.length}),this.socket=u(s,{path:"/socket.io",auth:{token:e},transports:$.socket.options.transports||["websocket","polling"],reconnection:!1,timeout:$.socket.options.timeout||2e4,forceNew:!1,withCredentials:!0,upgrade:!0,rememberUpgrade:!1,autoConnect:!0}),o=()=>{d||(clearTimeout(n),C.info("Socket connected successfully"),this.isConnected=!0,this.reconnectAttempts=0,this.connectingPromise=null,d=!0,this.socket.io.reconnection(!0),this.socket.io.reconnectionAttempts(this.maxReconnectAttempts),this.socket.io.reconnectionDelay($.socket.options.reconnectionDelay||1e3),this.socket.io.reconnectionDelayMax($.socket.options.reconnectionDelayMax||5e3),this.socket.on("reconnect",e=>{C.info("Socket reconnected",{attemptNumber:e}),this.isConnected=!0,this.reconnectAttempts=0}),this.socket.on("reconnect_attempt",e=>{C.debug("Socket reconnection attempt",{attemptNumber:e})}),this.socket.on("reconnect_error",e=>{C.warn("Socket reconnection error",{error:e.message})}),this.socket.on("reconnect_failed",()=>{C.error("Socket reconnection failed - max attempts reached"),this.isConnected=!1}),t())},a=e=>{d||(C.warn("Socket connection error",{error:e.message,type:e.type,description:e.description,url:s,attempt:this.reconnectAttempts+1}),this.reconnectAttempts++,this.reconnectAttempts>=this.maxReconnectAttempts&&(clearTimeout(n),C.error("Max reconnection attempts reached",{attempts:this.reconnectAttempts,url:s,error:e.message}),this.connectingPromise=null,d=!0,r(new Error(`Failed to connect to socket server after ${this.reconnectAttempts} attempts: ${e.message||"Connection failed"}`))))},i=e=>{C.warn("Socket disconnected",{reason:e}),this.isConnected=!1,this.connectingPromise&&!d&&(this.connectingPromise=null,d=!0,clearTimeout(n),r(new Error(`Connection lost: ${e}`)))},l=e=>{C.error("Socket error",{error:(null==e?void 0:e.message)||String(e)})},this.socket.once("connect",o),this.socket.once("connect_error",a),this.socket.on("disconnect",i),this.socket.on("error",l)}catch(c){clearTimeout(n),C.error("Failed to initialize socket connection",{error:c.message}),this.connectingPromise=null,r(c)}}),this.connectingPromise}cleanupSocket(){this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null),this.isConnected=!1,this.connectingPromise=null}disconnect(){try{this.socket&&(C.info("Disconnecting socket"),this.cleanupSocket(),this.presenceTrackingSetup=!1)}catch(e){C.error("Error during socket disconnect",{error:e.message})}}isSocketConnected(){var e;const t=!0===(null==(e=this.socket)?void 0:e.connected);return t&&!this.isConnected?this.isConnected=!0:!t&&this.isConnected&&(this.isConnected=!1),t&&this.isConnected}setupPresenceTracking(e){if(!this.socket)return null;if(this.presenceTrackingSetup)return C.warn("Presence tracking already setup, skipping duplicate setup"),null;const{onOnlineUsersUpdate:t,onUserConnected:s,onUserDisconnected:r,onUserTyping:n,onUserStoppedTyping:a}=e||{};return t&&this.socket.on("online_users",e=>{t(e)}),s&&this.socket.on("user_connected",e=>{s(e.userId||e)}),r&&this.socket.on("user_disconnected",e=>{r(e.userId||e)}),n&&this.socket.on("user_typing",e=>{n(e.userId||e)}),a&&this.socket.on("user_stopped_typing",e=>{a(e.userId||e)}),this.presenceTrackingSetup=!0,()=>{this.socket&&(this.socket.off("online_users"),this.socket.off("user_connected"),this.socket.off("user_disconnected"),this.socket.off("user_typing"),this.socket.off("user_stopped_typing")),this.presenceTrackingSetup=!1}}onMessage(e){this.socket&&(this.socket.on("receive_message",e),this.listeners.set("receive_message",e))}offMessage(e){if(this.socket){if(e)this.socket.off("receive_message",e);else{const e=this.listeners.get("receive_message");e?this.socket.off("receive_message",e):this.socket.off("receive_message")}this.listeners.delete("receive_message")}}sendMessage(e){if(!this.socket||!this.socket.connected)throw new Error("Socket not connected");this.socket.emit("send_message",e)}joinGroup(e){this.socket&&this.socket.connected&&this.socket.emit("join_group",{group_id:e})}leaveGroup(e){this.socket&&this.socket.connected&&this.socket.emit("leave_group",{group_id:e})}sendTyping(e,t=null){if(!this.socket||!this.socket.connected)return;const s=t?{group_id:t}:{receiver_id:e};this.socket.emit("typing",s)}sendStopTyping(e,t=null){if(!this.socket||!this.socket.connected)return;const s=t?{group_id:t}:{receiver_id:e};this.socket.emit("stop_typing",s)}cleanupListeners(){this.socket&&(this.listeners.forEach((e,t)=>{this.socket.off(t,e)}),this.listeners.clear())}getSocket(){return this.socket}},B=parseInt("30000"),O=c.create({baseURL:"http://localhost:8001",timeout:B,headers:{"Content-Type":"application/json"}});O.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),O.interceptors.response.use(e=>e,e=>{const t=_(e,"Chat Service");return Promise.reject(t)});const W=async(e,t,s,r=null,n=null)=>(await O.post("/api/messages",{receiver_id:t,content:s,group_id:r,expires_at:n})).data,G=async(e,t,s=100,r=0)=>(await O.get(`/api/messages/${e}/${t}`,{params:{limit:s,skip:r}})).data,F=async(e,t=100,s=0)=>(await O.get(`/api/groups/${e}/messages`,{params:{limit:t,skip:s}})).data,V=async e=>(await O.get(`/api/conversations/${e}`)).data,H=async e=>(await O.patch(`/api/messages/${e}/read`)).data,q=m((e,t)=>({users:[],groups:[],messages:[],selectedUser:null,selectedGroup:null,onlineUsers:new Set,conversations:{},typingUsers:[],setUsers:t=>e({users:t}),setGroups:t=>e({groups:t}),setConversations:t=>{const s={};t.forEach(e=>{s[e.user_id]={unread_count:e.unread_count,last_message:e.last_message}}),e({conversations:s})},setSelectedUser:t=>{e({selectedUser:t,selectedGroup:null}),e({messages:[]})},setSelectedGroup:t=>{if(e({selectedGroup:t,selectedUser:null}),e({messages:[]}),t){const e=t._id||t.id;P.joinGroup(e)}},addMessage:t=>{e(e=>({messages:[...e.messages,t]}))},setMessages:t=>e({messages:t}),updateOnlineUsers:t=>{e({onlineUsers:new Set(t)})},addOnlineUser:t=>{e(e=>{const s=new Set(e.onlineUsers);return s.add(t),{onlineUsers:s}})},removeOnlineUser:t=>{e(e=>{const s=new Set(e.onlineUsers);return s.delete(t),{onlineUsers:s}})},clearChat:()=>{e({selectedUser:null,selectedGroup:null,messages:[]})},clearAllChatData:()=>{e({users:[],groups:[],messages:[],selectedUser:null,selectedGroup:null,onlineUsers:new Set,conversations:{},typingUsers:[]})},setTypingUsers:t=>e({typingUsers:t}),addTypingUser:t=>{e(e=>e.typingUsers.some(e=>(e.id||e._id)===(t.id||t._id))?e:{typingUsers:[...e.typingUsers,t]})},removeTypingUser:t=>{e(e=>({typingUsers:e.typingUsers.filter(e=>(e.id||e._id)!==t)}))}})),Y=m((e,t)=>{const s=(()=>{try{return localStorage.getItem("token")||null}catch(e){return null}})();return{user:null,token:s,isAuthenticated:!!s,loading:!1,error:null,login:async(t,s)=>{var r,n;e({loading:!0,error:null});try{const r=await U(t,s);localStorage.setItem("token",r.token);try{await P.connect(r.token)}catch(a){}return e({user:r.user,token:r.token,isAuthenticated:!0,loading:!1,error:null}),r}catch(o){throw e({loading:!1,error:(null==(n=null==(r=o.response)?void 0:r.data)?void 0:n.message)||"Login failed"}),o}},register:async(t,s,r)=>{var n,a;e({loading:!0,error:null});try{const n=await M(t,s,r);localStorage.setItem("token",n.token);try{await P.connect(n.token)}catch(o){}return e({user:n.user,token:n.token,isAuthenticated:!0,loading:!1,error:null}),n}catch(i){throw e({loading:!1,error:(null==(a=null==(n=i.response)?void 0:n.data)?void 0:a.message)||"Registration failed"}),i}},logout:()=>{localStorage.removeItem("token"),P.disconnect();try{q.getState().clearAllChatData()}catch(t){}e({user:null,token:null,isAuthenticated:!1,error:null}),window.location.href="/"},clearError:()=>e({error:null}),initAuth:async()=>{const t=localStorage.getItem("token");if(t)try{const r=await E();e({user:r.user,token:t,isAuthenticated:!0});try{await P.connect(t)}catch(s){}}catch(s){localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}else e({user:null,token:null,isAuthenticated:!1})}}});class K extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){C.error("React Error Boundary caught error",{error:e.toString(),errorMessage:e.message,errorStack:e.stack,componentStack:t.componentStack})}render(){return this.state.hasError?w.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-red-50 via-pink-50 to-purple-50",children:w.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md mx-4",children:[w.jsxs("div",{className:"text-center mb-6",children:[w.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),w.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"Something went wrong"}),w.jsx("p",{className:"text-gray-600 mb-4",children:"An unexpected error occurred. Please refresh the page or try again."})]}),!1,w.jsxs("div",{className:"flex gap-3",children:[w.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Refresh Page"}),w.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.history.back()},className:"flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Go Back"})]})]})}):this.props.children}}const J=()=>{const{isAuthenticated:t}=Y(),[s,n]=e.useState({x:0,y:0}),[a,o]=e.useState(!1),[i,l]=e.useState(!1),[d,c]=e.useState("");e.useEffect(()=>{const e=e=>{n({x:e.clientX/window.innerWidth*100,y:e.clientY/window.innerHeight*100})},t=()=>{o(window.scrollY>20)};return window.addEventListener("mousemove",e),window.addEventListener("scroll",t),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("scroll",t)}},[]);return w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 via-pink-50 to-rose-50 relative overflow-hidden",children:[w.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[w.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob",style:{transform:`translate(${.02*s.x}px, ${.02*s.y}px)`}}),w.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-pink-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000",style:{transform:`translate(${.02*-s.x}px, ${.02*-s.y}px)`}}),w.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-indigo-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-4000",style:{transform:`translate(${.01*s.x}px, ${.01*s.y}px)`}})]}),w.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 px-6 py-4 transition-all duration-300 "+(a?"bg-white/80 backdrop-blur-lg shadow-md":"bg-transparent"),children:[w.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[w.jsxs(r,{to:"/",className:"flex items-center gap-2 group",children:[w.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:"D"}),w.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"D-Lite"})]}),w.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[w.jsx("a",{href:"#features",className:"text-gray-700 hover:text-indigo-600 font-medium transition-colors cursor-pointer",onClick:e=>{var t;e.preventDefault(),null==(t=document.querySelector("#features"))||t.scrollIntoView({behavior:"smooth"})},children:"Features"}),w.jsx("a",{href:"#showcase",className:"text-gray-700 hover:text-indigo-600 font-medium transition-colors cursor-pointer",onClick:e=>{var t;e.preventDefault(),null==(t=document.querySelector("#showcase"))||t.scrollIntoView({behavior:"smooth"})},children:"Showcase"}),w.jsx("a",{href:"#footer",className:"text-gray-700 hover:text-indigo-600 font-medium transition-colors cursor-pointer",onClick:e=>{var t;e.preventDefault(),null==(t=document.querySelector("#footer"))||t.scrollIntoView({behavior:"smooth"})},children:"About"})]}),w.jsx("div",{className:"hidden md:flex items-center gap-4",children:t?w.jsx(r,{to:"/dashboard",className:"px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-600 transition-all duration-300 shadow-md hover:shadow-lg hover:scale-105",children:"Dashboard"}):w.jsxs(w.Fragment,{children:[w.jsx(r,{to:"/login",className:"px-6 py-2.5 text-gray-700 hover:text-gray-900 font-medium transition-colors",children:"Login"}),w.jsx(r,{to:"/register",className:"px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-600 transition-all duration-300 shadow-md hover:shadow-lg hover:scale-105",children:"Get Started"})]})}),w.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>l(!i),"aria-label":"Toggle menu",children:w.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:i?w.jsx("path",{d:"M6 18L18 6M6 6l12 12"}):w.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})})]}),i&&w.jsx("div",{className:"md:hidden mt-4 pb-4 border-t border-gray-200 bg-white/95 backdrop-blur-lg rounded-b-2xl shadow-lg",children:w.jsxs("div",{className:"flex flex-col gap-2 pt-4",children:[w.jsx("a",{href:"#features",className:"px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg transition-colors",onClick:e=>{var t;e.preventDefault(),null==(t=document.querySelector("#features"))||t.scrollIntoView({behavior:"smooth"}),l(!1)},children:"Features"}),w.jsx("a",{href:"#showcase",className:"px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg transition-colors",onClick:e=>{var t;e.preventDefault(),null==(t=document.querySelector("#showcase"))||t.scrollIntoView({behavior:"smooth"}),l(!1)},children:"Showcase"}),w.jsx("a",{href:"#footer",className:"px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg transition-colors",onClick:e=>{var t;e.preventDefault(),null==(t=document.querySelector("#footer"))||t.scrollIntoView({behavior:"smooth"}),l(!1)},children:"About"}),w.jsx("div",{className:"h-px bg-gray-200 my-2"}),t?w.jsx(r,{to:"/dashboard",className:"mx-4 px-4 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium text-center hover:from-indigo-600 hover:to-purple-600 transition-all duration-300",onClick:()=>l(!1),children:"Dashboard"}):w.jsxs(w.Fragment,{children:[w.jsx(r,{to:"/login",className:"px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",onClick:()=>l(!1),children:"Login"}),w.jsx(r,{to:"/register",className:"mx-4 px-4 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium text-center hover:from-indigo-600 hover:to-purple-600 transition-all duration-300",onClick:()=>l(!1),children:"Get Started"})]})]})})]}),w.jsx("div",{className:"h-20"}),w.jsx("section",{className:"relative z-10 px-6 py-20 md:py-32",children:w.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[w.jsx("div",{className:"inline-block mb-6 px-4 py-2 bg-white/70 backdrop-blur-md rounded-full border-2 border-indigo-400/50 text-sm font-medium text-gray-800 shadow-lg ring-1 ring-indigo-500/20",children:"ðŸ’¬ Real-time Chat Experience"}),w.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 mb-6 leading-tight",children:["Chat with",w.jsx("span",{className:"block bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Confidence"})]}),w.jsx("p",{className:"text-xl md:text-2xl text-gray-600 mb-12 max-w-3xl mx-auto leading-relaxed",children:"Experience messaging reimagined with real-time WebSocket technology, secure conversations, and a modern, intuitive interface."}),w.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[!t&&w.jsxs(w.Fragment,{children:[w.jsxs(r,{to:"/register",className:"px-8 py-4 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-semibold text-lg hover:from-indigo-600 hover:to-purple-600 transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105 flex items-center gap-2",children:["Start Free",w.jsx("span",{className:"text-xl",children:"â†’"})]}),w.jsx(r,{to:"/login",className:"px-8 py-4 bg-white/80 backdrop-blur-sm text-gray-800 rounded-xl font-semibold text-lg hover:bg-white/90 transition-all duration-300 shadow-lg hover:shadow-xl border border-white/30 flex items-center gap-2",children:"Sign In"})]}),t&&w.jsxs(r,{to:"/chat",className:"px-8 py-4 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-semibold text-lg hover:from-indigo-600 hover:to-purple-600 transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105 flex items-center gap-2",children:["Start Chatting",w.jsx("span",{className:"text-xl",children:"â†’"})]})]})]})}),w.jsx("section",{id:"features",className:"relative z-10 px-6 py-20",children:w.jsxs("div",{className:"max-w-7xl mx-auto",children:[w.jsxs("div",{className:"text-center mb-16",children:[w.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Powerful Features"}),w.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Everything you need for modern, intelligent communication"})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{icon:"ðŸ’¬",title:"Real-time Messaging",description:"Instant messaging with WebSocket technology for seamless conversations"},{icon:"ðŸ”’",title:"Secure & Private",description:"End-to-end encryption and privacy-focused architecture"},{icon:"ðŸ‘¥",title:"User Management",description:"Easy user search and conversation management"},{icon:"âš¡",title:"Fast & Reliable",description:"Lightning-fast messaging with real-time updates"}].map((e,t)=>w.jsxs("div",{className:"group p-8 bg-white/60 backdrop-blur-xl rounded-2xl border border-white/30 hover:bg-white/80 transition-all duration-300 shadow-md hover:shadow-xl hover:scale-105",children:[w.jsx("div",{className:"text-5xl mb-4 transform group-hover:scale-110 transition-transform duration-300",children:e.icon}),w.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:e.title}),w.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.description})]},t))})]})}),w.jsx("section",{id:"showcase",className:"relative z-10 px-6 py-20",children:w.jsx("div",{className:"max-w-7xl mx-auto",children:w.jsx("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl border border-white/30 p-8 md:p-12 shadow-2xl",children:w.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[w.jsxs("div",{children:[w.jsx("div",{className:"inline-block mb-4 px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium",children:"Modern Interface"}),w.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Experience Clean Design"}),w.jsx("p",{className:"text-lg text-gray-600 mb-6 leading-relaxed",children:"Enjoy a clean, modern interface designed for seamless conversations. Fast, reliable, and easy to use."}),w.jsx("ul",{className:"space-y-3",children:["Real-time message delivery","Secure end-to-end encryption","User-friendly interface","Fast and responsive"].map((e,t)=>w.jsxs("li",{className:"flex items-center gap-3 text-gray-700",children:[w.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),e]},t))})]}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"aspect-square bg-gradient-to-br from-indigo-400 via-purple-400 to-pink-400 rounded-2xl p-8 flex items-center justify-center shadow-inner",children:w.jsxs("div",{className:"text-center text-white",children:[w.jsx("div",{className:"text-6xl mb-4 animate-softPulse",children:"ðŸ’¬"}),w.jsx("div",{className:"text-2xl font-bold mb-2",children:"Chat Mode"}),w.jsx("div",{className:"text-sm opacity-90",children:"Fast & Secure"})]})}),w.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-purple-300 rounded-full blur-2xl opacity-50 animate-blob"}),w.jsx("div",{className:"absolute -bottom-4 -left-4 w-32 h-32 bg-pink-300 rounded-full blur-2xl opacity-50 animate-blob animation-delay-2000"})]})]})})})}),w.jsx("section",{className:"relative z-10 px-6 py-20",children:w.jsx("div",{className:"max-w-4xl mx-auto text-center",children:w.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-3xl p-12 md:p-16 shadow-2xl",children:[w.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Ready to Experience the Future?"}),w.jsx("p",{className:"text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Join thousands of users experiencing the next generation of messaging"}),!t&&w.jsx(r,{to:"/register",className:"inline-block px-8 py-4 bg-white text-indigo-600 rounded-xl font-semibold text-lg hover:bg-gray-100 transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105",children:"Get Started Free"}),t&&w.jsx(r,{to:"/chat",className:"inline-block px-8 py-4 bg-white text-indigo-600 rounded-xl font-semibold text-lg hover:bg-gray-100 transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105",children:"Start Chatting Now"})]})})}),w.jsx("footer",{id:"footer",className:"relative z-10 bg-gradient-to-br from-gray-900 via-indigo-900 to-purple-900 text-white",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-16",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12",children:[w.jsxs("div",{className:"lg:col-span-1",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-400 to-purple-400 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-lg",children:"D"}),w.jsx("span",{className:"text-2xl font-bold",children:"D-Lite"})]}),w.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed",children:"Experience messaging reimagined with real-time WebSocket technology and secure conversations."}),w.jsxs("div",{className:"flex gap-4",children:[w.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110","aria-label":"Twitter",children:w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"})})}),w.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110","aria-label":"GitHub",children:w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})}),w.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110","aria-label":"Discord",children:w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})})}),w.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110","aria-label":"LinkedIn",children:w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})})]})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-bold mb-4",children:"Product"}),w.jsx("ul",{className:"space-y-3",children:["Features","Pricing","Integrations","API Docs","Changelog","Roadmap"].map(e=>w.jsx("li",{children:w.jsxs("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors flex items-center gap-2",children:[w.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full"}),e]})},e))})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-bold mb-4",children:"Company"}),w.jsx("ul",{className:"space-y-3",children:["About Us","Careers","Blog","Press Kit","Contact","Partners"].map(e=>w.jsx("li",{children:w.jsxs("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors flex items-center gap-2",children:[w.jsx("span",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full"}),e]})},e))})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-bold mb-4",children:"Stay Updated"}),w.jsx("p",{className:"text-gray-300 mb-4 text-sm",children:"Subscribe to our newsletter for updates and exclusive content."}),w.jsxs("form",{onSubmit:e=>{e.preventDefault(),alert(`Subscribed with: ${d}`),c("")},className:"space-y-3",children:[w.jsx("input",{type:"email",value:d,onChange:e=>c(e.target.value),placeholder:"Enter your email",className:"w-full px-4 py-2.5 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent transition-all",required:!0}),w.jsx("button",{type:"submit",className:"w-full px-4 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-600 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105",children:"Subscribe"})]}),w.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"We respect your privacy. Unsubscribe anytime."})]})]}),w.jsx("div",{className:"pt-8 border-t border-white/10",children:w.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[w.jsx("div",{className:"text-sm text-gray-300",children:"Â© 2026 D-Lite. All rights reserved."}),w.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-sm text-gray-300",children:[w.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy Policy"}),w.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms of Service"}),w.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Cookie Policy"}),w.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Security"}),w.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Support"})]}),w.jsx("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 hover:scale-110","aria-label":"Back to top",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]})})]})})]})},X=()=>{const[t,s]=e.useState(""),[a,o]=e.useState(""),i=n(),{login:l,loading:d,error:c,clearError:m}=Y();return w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-100 via-purple-50 via-pink-50 to-rose-100 flex items-center justify-center p-4 relative overflow-hidden",children:[w.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[w.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"}),w.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-pink-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"})]}),w.jsxs("div",{className:"bg-white/70 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-md p-10 relative z-10 border border-white/30",children:[w.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"Login"}),c&&w.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:c}),w.jsxs("form",{onSubmit:async e=>{e.preventDefault(),m();try{await l(t,a),i("/dashboard")}catch(s){}},className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email or Username"}),w.jsx("input",{type:"text",value:t,onChange:e=>s(e.target.value),required:!0,className:"w-full px-4 py-3 bg-white/80 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent text-gray-800",placeholder:"you@example.com or username"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),w.jsx("input",{type:"password",value:a,onChange:e=>o(e.target.value),required:!0,className:"w-full px-4 py-3 bg-white/80 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent text-gray-800",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),w.jsx("button",{type:"submit",disabled:d,className:"w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-md hover:shadow-lg",children:d?"Logging in...":"Login"})]}),w.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600",children:["Don't have an account?"," ",w.jsx(r,{to:"/register",className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Register"})]})]})]})},Q=()=>{const[t,s]=e.useState(""),[a,o]=e.useState(""),[i,l]=e.useState(""),d=n(),{register:c,loading:m,error:u,clearError:h}=Y();return w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-100 via-purple-50 via-pink-50 to-rose-100 flex items-center justify-center p-4 relative overflow-hidden",children:[w.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[w.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"}),w.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-pink-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"})]}),w.jsxs("div",{className:"bg-white/70 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-md p-10 relative z-10 border border-white/30",children:[w.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"Register"}),u&&w.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:u}),w.jsxs("form",{onSubmit:async e=>{e.preventDefault(),h();try{await c(t,a,i),d("/dashboard")}catch(s){}},className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),w.jsx("input",{type:"text",value:t,onChange:e=>s(e.target.value),required:!0,minLength:3,maxLength:30,className:"w-full px-4 py-3 bg-white/80 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent text-gray-800",placeholder:"johndoe"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),w.jsx("input",{type:"email",value:a,onChange:e=>o(e.target.value),required:!0,className:"w-full px-4 py-3 bg-white/80 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent text-gray-800",placeholder:"you@example.com"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),w.jsx("input",{type:"password",value:i,onChange:e=>l(e.target.value),required:!0,minLength:6,className:"w-full px-4 py-3 bg-white/80 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent text-gray-800",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),w.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-md hover:shadow-lg",children:m?"Creating account...":"Register"})]}),w.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600",children:["Already have an account?"," ",w.jsx(r,{to:"/login",className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Login"})]})]})]})},Z=e.memo(({children:e,onLogout:t,className:s="",focusMode:r=!1})=>w.jsx("div",{className:`w-full sm:w-80 md:w-80 h-full flex flex-col bg-white/50 backdrop-blur-xl border-r border-gray-200/50 transition-all duration-300 ease-in-out ux-panel ux-panel-sidebar ux-focus-hidden ${s} shadow-lg md:shadow-none`,style:{opacity:r?.95:1},children:w.jsxs("div",{className:"h-full flex flex-col",children:[w.jsx("div",{className:"px-5 py-4 border-b border-gray-200/60 bg-white/30",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2.5",children:[w.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-xl flex items-center justify-center shadow-md",children:w.jsx("span",{className:"text-white font-bold text-lg",children:"D"})}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-base font-bold text-gray-900",children:"D-Lite"}),w.jsx("p",{className:"text-xs text-gray-500",children:"Messaging"})]})]}),t&&w.jsx("button",{onClick:t,className:"px-3 py-1.5 text-xs font-medium text-gray-600 hover:text-gray-900 hover:bg-white/60 rounded-lg transition-all border border-transparent hover:border-gray-200",title:"Logout",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})}),w.jsx("div",{className:"flex-1 overflow-hidden p-4",children:e})]})}));Z.displayName="SoftSidebar";const ee=e.memo(({header:e,children:t,input:s,focusMode:r=!1})=>w.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden bg-gradient-to-br from-gray-50/50 to-white/50 transition-all duration-300 ease-out ux-focus-chat "+(r?"opacity-95":"opacity-100"),style:{willChange:"opacity"},children:[e&&w.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b border-gray-200/60 bg-white/60 backdrop-blur-md shadow-sm sticky top-0 z-10",children:e}),w.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-gradient-to-b from-transparent via-indigo-50/10 to-purple-50/10",style:{padding:"calc(1rem * var(--ux-spacing-multiplier))"},children:w.jsx("div",{className:"max-w-4xl mx-auto flex flex-col min-h-full justify-end px-2 sm:px-0",style:{gap:"var(--ux-chat-gap)"},children:t})}),s&&w.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-t border-gray-200/60 bg-white/60 backdrop-blur-md shadow-lg sticky bottom-0 z-10 ux-input-container safe-area-inset-bottom",style:{paddingTop:"calc(0.75rem * var(--ux-spacing-multiplier))",paddingBottom:"max(calc(0.75rem * var(--ux-spacing-multiplier)), env(safe-area-inset-bottom))"},children:w.jsx("div",{className:"max-w-4xl mx-auto",children:s})})]}));ee.displayName="ChatPanel";const te=e.memo(({sidebarContent:t,chatHeader:s,chatContent:r,chatInput:n,onLogout:a})=>{const[o,i]=e.useState(!1),[l,d]=e.useState(!1);return e.useEffect(()=>{const e=()=>{d(window.innerWidth<768),window.innerWidth<768&&i(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),w.jsxs("div",{className:"flex h-screen w-screen overflow-hidden relative",children:[l&&w.jsx("button",{onClick:()=>i(!o),className:"fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-lg md:hidden","aria-label":"Toggle menu",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o?w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),w.jsx("div",{className:`\n        ${l?"fixed inset-y-0 left-0 z-40 transform transition-transform duration-300 ease-in-out w-full sm:w-80":"relative w-full sm:w-80"}\n        ${l&&!o?"-translate-x-full":""}\n      `,children:w.jsx(Z,{onLogout:a,children:t})}),l&&o&&w.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>i(!1)}),w.jsx(ee,{header:s,input:n,children:r})]})});te.displayName="AppLayout";const se=e.memo(({userId:e,avatarUrl:t,name:s,auraColor:r="#a5f3fc",size:n="md",online:a=!1,heatLevel:o="low",className:i=""})=>{return w.jsxs("div",{className:`relative ${i}`,children:[w.jsx("div",{className:`absolute inset-0 rounded-full ${{sm:"ring-1",md:"ring-2",lg:"ring-3",xl:"ring-4"}[n]} transition-all duration-500`,style:{borderColor:r,boxShadow:(()=>{switch(o){case"high":return"0 0 20px rgba(139, 92, 246, 0.6)";case"medium":return"0 0 15px rgba(139, 92, 246, 0.4)";default:return"0 0 10px rgba(139, 92, 246, 0.2)"}})(),animation:"softPulse 3s ease-in-out infinite"}}),w.jsx("div",{className:`${{sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-20 h-20"}[n]} rounded-full overflow-hidden bg-gradient-to-br from-indigo-200 to-purple-200 flex items-center justify-center text-white font-medium relative z-10`,children:t?w.jsx("img",{src:t,alt:s||"User",className:"w-full h-full object-cover",loading:"lazy"}):w.jsx("span",{className:"text-xs",children:(l=s,l?l.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"?")})}),a&&w.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white",style:{boxShadow:"0 0 8px rgba(34, 197, 94, 0.6)"}})]});var l});se.displayName="AuraAvatar";const re=e=>String((null==e?void 0:e.id)||(null==e?void 0:e._id)||""),ne=e=>(null==e?void 0:e.username)||(null==e?void 0:e.name)||"Unknown User",ae=e.memo(()=>{const{users:t,selectedUser:s,setSelectedUser:r,setUsers:n,onlineUsers:a,conversations:o}=q(),[i,l]=e.useState(""),[d,c]=e.useState([]),[m,u]=e.useState(!1),h=re(s),x=e.useCallback(e=>a.has(e)||a.has(String(e)),[a]);e.useMemo(()=>{const e=new Map;return t.forEach(t=>{const s=re(t);s&&e.set(s,t)}),e},[t]);const g=e.useMemo(()=>{const e=new Map;let t=0;const s=Object.keys(o||{});var r;return(r=s)&&Array.isArray(r)&&r.forEach(s=>{const r=String(s);r&&!e.has(r)&&(e.set(r,t),t+=1)}),e},[o]),p=e.useCallback((e,t)=>{var s,r;const n=re(e),a=re(t),i=g.has(n)?g.get(n):Number.MAX_SAFE_INTEGER,l=g.has(a)?g.get(a):Number.MAX_SAFE_INTEGER;if(i!==l)return i-l;const d=(null==(s=o[n])?void 0:s.unread_count)||0,c=(null==(r=o[a])?void 0:r.unread_count)||0;return d!==c?c-d:ne(e).localeCompare(ne(t))},[o,g]),f=e.useMemo(()=>{const e=[...t].sort(p);return{online:e.filter(e=>x(re(e))),offline:e.filter(e=>!x(re(e)))}},[t,p,x]),v=e.useMemo(()=>[],[]),b=e.useCallback(e=>{const s=re(e);if(!s)return;t.some(e=>re(e)===s)||n([...t,e]),h!==s&&r(e),l(""),c([])},[h,t,n,r]),y=e.useMemo(()=>"gap-3",[]),j=e=>{var t;const s=re(e),r=x(s),n=h===s,a=(null==(t=o[s])?void 0:t.unread_count)||0;return w.jsxs("button",{onClick:()=>b(e),className:"w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 relative group ux-touch-target "+(n?"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 shadow-sm":"bg-white/50 hover:bg-white/80 border border-transparent hover:border-gray-200/60 hover:shadow-sm"),children:[w.jsxs("div",{className:"relative flex-shrink-0",children:[w.jsx(se,{userId:s,avatarUrl:e.avatarUrl,name:ne(e),size:"md",online:r}),a>0&&w.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full min-w-[20px] h-5 flex items-center justify-center px-1.5 shadow-md ring-2 ring-white",children:a>99?"99+":a})]}),w.jsxs("div",{className:"flex-1 text-left min-w-0",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[w.jsx("span",{className:"font-semibold text-gray-800 text-sm truncate",children:ne(e)}),r&&w.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-green-500"})]}),r?null:w.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:[w.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("circle",{cx:"10",cy:"10",r:"8",opacity:"0.3"})}),"Offline"]})]}),!a&&w.jsx("svg",{className:"w-4 h-4 transition-opacity "+(n?"opacity-60":"opacity-0 group-hover:opacity-40"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},s)};return w.jsxs("div",{className:`h-full flex flex-col ${y}`,children:[w.jsx("div",{children:w.jsxs("div",{className:"relative",children:[w.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),w.jsx("input",{type:"text",placeholder:"Search for users...",value:i,onChange:e=>(async e=>{if(l(e),e.trim().length<2)return c([]),void u(!1);try{u(!0);const t=await R(e);c(t.users||[])}catch(t){c([])}finally{u(!1)}})(e.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200/60 bg-white/70 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-indigo-400/50 focus:border-indigo-400 placeholder-gray-400 text-sm transition-all ux-touch-target"})]})}),!i&&v.length>0&&w.jsxs("div",{className:"rounded-xl border border-indigo-100/80 bg-indigo-50/60 px-3 py-2",children:[w.jsx("div",{className:"text-[11px] font-semibold text-indigo-600 uppercase tracking-wide mb-2",children:"Quick Switch"}),w.jsx("div",{className:"flex flex-wrap gap-1.5",children:v.map(e=>{const t=re(e);return w.jsx("button",{type:"button",onClick:()=>b(e),className:"px-2.5 py-1.5 rounded-lg bg-white/80 hover:bg-white border border-indigo-100 text-xs text-gray-700 transition-all ux-touch-target",children:ne(e)},t)})})]}),i.trim().length>=2&&w.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl border border-gray-200/60 shadow-sm overflow-hidden",children:[w.jsx("div",{className:"px-4 py-2.5 bg-gray-50/80 border-b border-gray-200/60",children:w.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Search Results"})}),w.jsx("div",{className:"p-2 max-h-80 overflow-y-auto",children:m?w.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[w.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500 mb-3"}),w.jsx("div",{className:"text-sm",children:"Searching..."})]}):d.length>0?w.jsx("div",{className:"space-y-1",children:d.map(e=>w.jsxs("button",{onClick:()=>b(e),className:"w-full flex items-center gap-3 p-2.5 rounded-lg hover:bg-indigo-50/80 transition-all group ux-touch-target",children:[w.jsx(se,{userId:re(e),avatarUrl:e.avatarUrl,name:ne(e),size:"sm",online:x(re(e))}),w.jsxs("div",{className:"flex-1 text-left min-w-0",children:[w.jsx("div",{className:"font-medium text-gray-800 text-sm truncate",children:ne(e)}),w.jsx("div",{className:"text-xs text-gray-500 truncate",children:e.email})]}),w.jsx("svg",{className:"w-4 h-4 text-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},re(e)))}):w.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[w.jsx("svg",{className:"w-12 h-12 mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),w.jsx("div",{className:"text-sm font-medium",children:"No users found"}),w.jsx("div",{className:"text-xs mt-1",children:"Try a different search term"})]})})]}),!i&&0===t.length&&w.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-100",children:w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("svg",{className:"w-5 h-5 text-indigo-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-1",children:"Start Your First Conversation"}),w.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:"Search for users above to begin chatting. Your conversations are private and secure."})]})]})}),!i&&t.length>0&&w.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 custom-scrollbar",children:[f.online.length>0&&w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2 px-2 mb-2",children:[w.jsx("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-green-500 animate-pulse"}),w.jsx("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Online"}),w.jsx("span",{className:"text-xs text-gray-400 font-semibold",children:f.online.length})]}),w.jsx("div",{className:"space-y-1.5",children:f.online.map(j)})]}),f.offline.length>0&&w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2 px-2 mb-2",children:[w.jsx("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-gray-300"}),w.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Recent"}),w.jsx("span",{className:"text-xs text-gray-400 font-semibold",children:f.offline.length})]}),w.jsx("div",{className:"space-y-1.5",children:f.offline.map(j)})]})]})]})});ae.displayName="UsersList";const oe=e.memo(({message:e,isOwn:t,senderName:s,mood:r="balanced",timestamp:n,attentionType:a=null,showAvatar:o=!0})=>{const i={mention:"ring-2 ring-indigo-400/50 shadow-indigo-200/50",reply:"ring-2 ring-purple-300/50 shadow-purple-200/50","focus-chat":"ring-1 ring-gray-300/50"}[a]||"",l=n?new Date(n):null,d=l&&l.toDateString()===(new Date).toDateString(),c=l?d?l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):l.toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null;return w.jsxs("div",{className:"flex items-end gap-2 mb-2 transition-all duration-300 ease-out px-3 group "+(t?"justify-end":"justify-start"),style:{willChange:"transform"},children:[!t&&o&&w.jsx("div",{className:"flex-shrink-0 mb-1",children:w.jsx(se,{userId:e.sender_id||e.senderId,name:s||"User",size:"sm",online:!1})}),w.jsxs("div",{className:`flex flex-col ${t?"items-end":"items-start"} max-w-[85%] sm:max-w-[75%] md:max-w-[70%]`,children:[!t&&s&&w.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1 px-1",children:s}),w.jsxs("div",{className:`relative rounded-2xl px-4 py-2.5 shadow-sm transition-all duration-300 ease-out transform hover:scale-[1.01] ${t?"bg-gradient-to-br from-indigo-500 via-indigo-600 to-purple-600 text-white rounded-br-md":"bg-white border border-gray-200/80 text-gray-800 rounded-bl-md shadow-md"} ${i} group-hover:shadow-lg`,style:{willChange:"transform, box-shadow"},children:[w.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap break-words "+(t?"text-white":"text-gray-800"),children:e.content||e.text||""}),w.jsxs("div",{className:"text-xs mt-1.5 flex items-center gap-1.5 "+(t?"text-white/70":"text-gray-500"),children:[w.jsx("span",{className:"font-medium",children:c}),t&&w.jsx("div",{className:"flex items-center gap-0.5",children:e.read?w.jsx("svg",{className:"w-3.5 h-3.5 text-blue-300",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):w.jsx("svg",{className:"w-3.5 h-3.5 opacity-60",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})]})]}),t&&o&&!1]})});oe.displayName="ChatBubble";const ie=e.memo(({users:e=[]})=>e&&0!==e.length?w.jsxs("div",{className:"flex items-end gap-2 mb-2 px-3 animate-fade-in",children:[1===e.length&&w.jsx("div",{className:"flex-shrink-0 mb-1",children:w.jsx(se,{userId:e[0].id||e[0]._id,name:e[0].username||e[0].name||"User",size:"sm",online:!0})}),w.jsx("div",{className:"bg-white border border-gray-200/80 rounded-2xl rounded-bl-md px-4 py-3 shadow-sm animate-fade-in",children:w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsxs("div",{className:"flex gap-1",children:[w.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"1.4s",animationTimingFunction:"cubic-bezier(0.4, 0, 0.6, 1)"}}),w.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"200ms",animationDuration:"1.4s",animationTimingFunction:"cubic-bezier(0.4, 0, 0.6, 1)"}}),w.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"400ms",animationDuration:"1.4s",animationTimingFunction:"cubic-bezier(0.4, 0, 0.6, 1)"}})]}),e.length>1&&w.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[e.length," people typing..."]})]})})]}):null);ie.displayName="TypingIndicator";const le=e.memo(()=>{const{messages:t,selectedUser:s,typingUsers:r}=q(),{user:n}=Y(),a=e.useRef(null),o=e.useRef(null),i=((null==n?void 0:n.username)||(null==n?void 0:n.name)||"").toLowerCase();return e.useEffect(()=>{a.current&&a.current.scrollIntoView({behavior:"smooth",block:"end"})},[t]),e.useEffect(()=>{o.current&&t.length>0&&(o.current.scrollTop=o.current.scrollHeight)},[s]),s?t&&0!==t.length?w.jsxs("div",{className:"space-y-1 pb-2",children:[t.map((e,r)=>{var a;const o=(e.sender_id||e.senderId)===((null==n?void 0:n.id)||(null==n?void 0:n._id)),l=o?"You":(null==s?void 0:s.username)||(null==s?void 0:s.name)||"Unknown",d=String(e.content||e.text||"").toLowerCase(),c=!o&&i.length>0&&d.includes(`@${i}`),m=Boolean(e.reply_to||e.replyTo||e.reply_to_id||e.parent_id),u=(null==(a=e._id)?void 0:a.startsWith("temp_"))||r===t.length-1;return w.jsx("div",{className:"animate-slide-up "+(u?"animate-message-send":""),style:{animationDelay:`${Math.min(.02*r,.2)}s`,willChange:"transform, opacity"},children:w.jsx(oe,{message:e,isOwn:o,senderName:o?null:l,timestamp:e.timestamp||e.createdAt,attentionType:c?"mention":m?"reply":null,showAvatar:!o})},e._id||e.id)}),r&&r.length>0&&w.jsx(ie,{users:r}),w.jsx("div",{ref:a,className:"h-1"})]}):w.jsx("div",{className:"flex items-center justify-center h-full bg-gradient-to-br from-indigo-50/30 via-purple-50/20 to-pink-50/30",children:w.jsxs("div",{className:"text-center max-w-md px-6 animate-fade-in",children:[w.jsx("div",{className:"w-24 h-24 mx-auto mb-5 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full flex items-center justify-center shadow-md",children:w.jsx("svg",{className:"w-12 h-12 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),w.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No messages yet"}),w.jsxs("p",{className:"text-sm text-gray-500",children:["Start the conversation with ",w.jsx("span",{className:"font-semibold text-indigo-600",children:(null==s?void 0:s.username)||(null==s?void 0:s.name)})]})]})}):w.jsx("div",{className:"flex items-center justify-center h-full bg-gradient-to-br from-indigo-50/30 via-purple-50/20 to-pink-50/30",children:w.jsxs("div",{className:"text-center max-w-md px-6 animate-fade-in",children:[w.jsx("div",{className:"w-28 h-28 mx-auto mb-6 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center shadow-lg animate-pulse-slow",children:w.jsx("svg",{className:"w-14 h-14 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),w.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Welcome to D-Lite"}),w.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Select a conversation from the sidebar or search for users to start chatting."})]})})});le.displayName="MessageList";const de=({onSendMessage:t})=>{const{selectedUser:s,selectedGroup:r}=q(),{user:n}=Y(),[a,o]=e.useState(""),[i,l]=e.useState(!1),d=e.useRef(null),c=e.useRef(null),m=(null==n?void 0:n.id)||(null==n?void 0:n._id)||null,u=(null==s?void 0:s.id)||(null==s?void 0:s._id)||null,h=(null==r?void 0:r.id)||(null==r?void 0:r._id)||null,x=e.useCallback(e=>{m&&(u||h)&&(e?P.sendTyping(u,h):P.sendStopTyping(u,h))},[m,h,u]),g=e.useCallback(async()=>{const e=a.trim();if(!e||!m||!u&&!h)return;const{addMessage:s}=q.getState(),r={_id:`temp_${Date.now()}`,id:`temp_${Date.now()}`,sender_id:m,receiver_id:u,group_id:h,content:e,timestamp:(new Date).toISOString(),createdAt:(new Date).toISOString(),read:!1,message_type:"text",chat_type:h?"group":"private"};s(r),o(""),l(!1),x(!1);try{P.sendMessage({receiver_id:u,group_id:h,content:e});const s=await W(null,u,e,h);setTimeout(()=>{const{messages:e,setMessages:t}=q.getState();if(e.some(e=>{var t;return(e._id===r._id||e.id===r.id)&&(null==(t=e._id)?void 0:t.startsWith("temp_"))})&&s){t(e.map(e=>e._id===r._id||e.id===r.id?{...s,_id:s._id||s.id,id:s.id||s._id}:e))}},1e3),t&&t(e)}catch(n){const{messages:e,setMessages:t}=q.getState();t(e.filter(e=>e._id!==r._id&&e.id!==r.id))}},[m,x,h,a,t,u]),p=e.useCallback(e=>{const t=e.trim().length>0;t&&!i&&(l(!0),x(!0)),!t&&i&&(l(!1),x(!1)),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{l(!1),x(!1)},1e3)},[x,i]);return e.useEffect(()=>()=>{c.current&&clearTimeout(c.current),x(!1)},[x]),w.jsxs("div",{className:"flex items-end gap-3 px-1",children:[w.jsx("button",{className:"flex-shrink-0 w-10 h-10 rounded-xl bg-white/80 hover:bg-white border border-gray-200/60 flex items-center justify-center transition-all duration-300 ease-out hover:shadow-md group transform hover:scale-105 active:scale-95",style:{willChange:"transform"},title:"Add emoji or attachment",children:w.jsx("svg",{className:"w-5 h-5 text-gray-500 group-hover:text-indigo-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),w.jsxs("div",{className:"flex-1 relative",children:[w.jsx("textarea",{ref:d,value:a,onChange:e=>{const t=e.target.value;o(t),p(t)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g())},placeholder:"Type your message...",className:"w-full px-4 py-3 bg-white/95 backdrop-blur-sm border-2 border-gray-200/60 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-indigo-400/50 focus:border-indigo-400 text-gray-800 placeholder-gray-400 transition-all duration-300 ease-out shadow-sm hover:shadow-md focus:shadow-lg",style:{willChange:"border-color, box-shadow",minHeight:"52px",maxHeight:"160px"},rows:2,inputMode:"text",autoComplete:"off",autoCorrect:"on",autoCapitalize:"sentences"}),a.length>0&&w.jsx("div",{className:"absolute bottom-2 right-3 text-xs text-gray-400",children:a.length})]}),w.jsx("button",{onClick:g,disabled:!a.trim(),className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-indigo-500 via-indigo-600 to-purple-600 text-white rounded-2xl font-medium hover:from-indigo-600 hover:via-indigo-700 hover:to-purple-700 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-300 ease-out shadow-lg hover:shadow-xl hover:scale-105 active:scale-95 flex items-center justify-center group",style:{willChange:"transform, box-shadow"},title:"Send message",children:a.trim()?w.jsx("svg",{className:"w-5 h-5 transform group-hover:translate-x-0.5 group-hover:translate-y-0.5 transition-transform duration-300 ease-out",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}):w.jsx("svg",{className:"w-5 h-5 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]})},ce=()=>{const t=n(),s=a(),{user:r,token:o,logout:i}=Y(),{users:l,selectedUser:d,selectedGroup:c,messages:m,onlineUsers:u,typingUsers:h,setUsers:x,setMessages:g,setConversations:p,setSelectedUser:f,addMessage:v,updateOnlineUsers:b,addOnlineUser:y,removeOnlineUser:j}=q(),[N,k]=e.useState(!0);return e.useEffect(()=>{if(!o||!r)return void t("/login");return(async()=>{var e;try{try{await P.connect(o)}catch(n){}P.setupPresenceTracking({onOnlineUsersUpdate:e=>{b(e)},onUserConnected:e=>{y(e)},onUserDisconnected:e=>{j(e)}}),P.onMessage(async e=>{const t=r.id||r._id,s=q.getState(),n=s.selectedUser,a=s.selectedGroup,o=(null==n?void 0:n.id)||(null==n?void 0:n._id),i=(null==a?void 0:a.id)||(null==a?void 0:a._id),l=!!e.group_id,d=e.sender_id||e.senderId,c=e.receiver_id||e.receiverId;let m=!1;if(m=l?e.group_id===i:c===t&&d===o||d===t&&c===o,m||!n&&!a){const{messages:t}=q.getState();if(!t.some(t=>{const s=t._id||t.id,r=e._id||e.id;return!(!s||!r||s!==r)||t.content===e.content&&Math.abs(new Date(t.timestamp||t.createdAt).getTime()-new Date(e.timestamp||e.createdAt).getTime())<5e3})){const{messages:t,setMessages:s}=q.getState();if(t.some(t=>{var s;return(null==(s=t._id)?void 0:s.startsWith("temp_"))&&t.content===e.content&&(t.sender_id===d||t.senderId===d)})){s(t.map(t=>{var s;return!(null==(s=t._id)?void 0:s.startsWith("temp_"))||t.content!==e.content||t.sender_id!==d&&t.senderId!==d?t:e}))}else v(e)}}if(!l&&c===t)try{const e=await V(t);p(e||[])}catch(u){}});const i=r.id||r._id;let d=[];try{d=await V(i)||[]}catch(a){d=[]}p(d);const c=d.map(e=>e.user_id);if(c.length>0){const e=c.map(e=>A(e).catch(e=>null)),t=(await Promise.all(e)).filter(e=>e&&e.user).map(e=>e.user);x(t)}else x([]);const m=null==(e=s.state)?void 0:e.selectedUserId;if(m){const e=l.find(e=>(e.id||e._id)===m);e?(f(e),t(s.pathname,{replace:!0,state:{}})):A(m).then(e=>{if(e&&e.user){const t=e.user,s=q.getState().users;x([...s,t]),f(t)}t(s.pathname,{replace:!0,state:{}})}).catch(e=>{t(s.pathname,{replace:!0,state:{}})})}k(!1)}catch(a){k(!1)}})(),()=>{P.offMessage()}},[o,r,t,x,p,b,y,j,v,s]),e.useEffect(()=>{try{(async()=>{try{if(c&&r){try{const e=c.id||c._id;if(!e)return;P.joinGroup(e);const t=((await F(e)).messages||[]).sort((e,t)=>new Date(e.timestamp||e.createdAt||0).getTime()-new Date(t.timestamp||t.createdAt||0).getTime());g(t)}catch(e){g([])}return}if(!d||!r)return void g([]);const t=r.id||r._id,s=d.id||d._id;if(!t||!s)return;const n=((await G(t,s)).messages||[]).sort((e,t)=>new Date(e.timestamp||e.createdAt||0).getTime()-new Date(t.timestamp||t.createdAt||0).getTime());g(n);const a=n.filter(e=>(e.receiver_id===t||e.receiverId===t)&&!e.read);for(const r of a)try{await H(r._id||r.id)}catch(e){}if(a.length>0)try{const e=await V(t);p(e||[])}catch(e){}}catch(e){g([])}})().catch(e=>{g([])})}catch(e){g([])}},[d,c,r,g,p]),N?w.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-indigo-100 via-purple-50 to-pink-50",children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),w.jsx("p",{className:"text-gray-600",children:"Loading chat..."})]})}):w.jsx(te,{sidebarContent:w.jsx(ae,{}),chatHeader:d?w.jsxs("div",{className:"flex items-center justify-between px-2",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"relative",children:w.jsx(se,{userId:d.id||d._id,avatarUrl:d.avatarUrl,name:d.username||d.name,size:"md",online:u.has(d.id||d._id)})}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"font-semibold text-gray-900 text-base",children:d.username||d.name}),u.has(d.id||d._id)&&w.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-green-500 animate-pulse"})]}),w.jsx("div",{className:"text-xs text-gray-500 mt-0.5 flex items-center gap-1",children:u.has(d.id||d._id)?w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"text-green-500",children:"Online"}),w.jsx("span",{children:"â€¢"}),w.jsx("span",{children:"Direct message"})]}):w.jsx("span",{children:"Direct message"})})]})]}),w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100/80 transition-colors",title:"More options",children:w.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})})]}):w.jsx("div",{className:"flex items-center justify-between",children:w.jsxs("div",{children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Messages"}),w.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Select a conversation or search for users"})]})}),chatContent:w.jsx(le,{}),chatInput:d?w.jsx(de,{}):null,onLogout:i})},me=e.memo(({user:e,lastMessage:t,unreadCount:s=0,isOnline:r=!1,onClick:a})=>{const o=n(),i=(null==e?void 0:e.username)||(null==e?void 0:e.name)||"Unknown User",l=(null==t?void 0:t.content)||(null==t?void 0:t.text)||"No messages yet",d=(null==t?void 0:t.timestamp)||(null==t?void 0:t.createdAt),c=d?new Date(d).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return w.jsxs("button",{onClick:()=>{a?a(e):o("/chat",{state:{selectedUserId:e.id||e._id}})},className:"w-full flex items-center gap-4 p-4 bg-white/90 hover:bg-white rounded-xl border transition-all duration-300 ease-out shadow-sm hover:shadow-lg group transform hover:scale-[1.01] "+(s>0?"border-indigo-300/60 hover:border-indigo-400 bg-indigo-50/30":"border-gray-200/60 hover:border-gray-300"),style:{willChange:"transform, box-shadow"},children:[w.jsxs("div",{className:"relative flex-shrink-0",children:[w.jsx(se,{userId:(null==e?void 0:e.id)||(null==e?void 0:e._id),avatarUrl:(null==e?void 0:e.avatar)||(null==e?void 0:e.avatarUrl),name:i,size:"md",online:r}),r&&w.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-white rounded-full"}),s>0&&w.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs font-bold rounded-full min-w-[22px] h-5 flex items-center justify-center px-1.5 shadow-lg ring-2 ring-white animate-pulse-slow transform transition-transform duration-300 group-hover:scale-110",children:s>99?"99+":s})]}),w.jsxs("div",{className:"flex-1 text-left min-w-0",children:[w.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[w.jsx("span",{className:"font-semibold text-sm truncate "+(s>0?"text-gray-900":"text-gray-700"),children:i}),c&&w.jsx("span",{className:"text-xs flex-shrink-0 ml-2 "+(s>0?"text-indigo-600 font-medium":"text-gray-400"),children:c})]}),w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("p",{className:"text-sm truncate flex-1 "+(s>0?"text-gray-800 font-medium":"text-gray-600"),children:l})})]}),w.jsx("div",{className:"flex-shrink-0",children:s>0?w.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full group-hover:scale-125 transition-transform duration-300 ease-out"}):w.jsx("svg",{className:"w-5 h-5 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-out transform group-hover:translate-x-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})});me.displayName="ChatBubble";const ue=()=>{const t=n(),{user:s,token:r,logout:a}=Y(),{conversations:o,users:i,onlineUsers:l,setConversations:d,setUsers:c,updateOnlineUsers:m,addOnlineUser:u,removeOnlineUser:h}=q(),[x,g]=e.useState(!0),[p,f]=e.useState("");e.useEffect(()=>{if(!r||!s)return;try{(async()=>{try{const t=s.id||s._id;try{P.isSocketConnected()||await P.connect(r),P.setupPresenceTracking({onOnlineUsersUpdate:e=>{m(e)},onUserConnected:e=>{u(e)},onUserDisconnected:e=>{h(e)}})}catch(e){}const n=await V(t)||[];d(n);const a=n.map(e=>e.user_id);if(a.length>0){const e=a.map(e=>A(e).catch(e=>null)),t=(await Promise.all(e)).filter(e=>e&&e.user).map(e=>e.user);c(t)}}catch(t){d([]),c([])}finally{g(!1)}})().catch(e=>{g(!1),d([]),c([])})}catch(e){g(!1),d([]),c([])}return()=>{}},[r,s,d,c,m,u,h]);const v=e=>{t("/chat",{state:{selectedUserId:e.id||e._id}})},b=e=>l.has(e)||l.has(String(e)),y=Object.entries(o||{}).map(([e,t])=>{const s=i.find(t=>(t.id||t._id)===e);return{userId:e,user:s,unreadCount:t.unread_count||0,lastMessage:t.last_message}}).filter(e=>e.user),j=y.filter(e=>{var t,s,r,n;if(!p.trim())return!0;const a=p.toLowerCase(),o=((null==(t=e.user)?void 0:t.username)||(null==(s=e.user)?void 0:s.name)||"").toLowerCase(),i=((null==(r=e.lastMessage)?void 0:r.content)||(null==(n=e.lastMessage)?void 0:n.text)||"").toLowerCase();return o.includes(a)||i.includes(a)});j.sort((e,t)=>{var s,r,n,a;const o=(null==(s=e.lastMessage)?void 0:s.timestamp)||(null==(r=e.lastMessage)?void 0:r.createdAt)||0,i=(null==(n=t.lastMessage)?void 0:n.timestamp)||(null==(a=t.lastMessage)?void 0:a.createdAt)||0;return new Date(i)-new Date(o)});const N=j.filter(e=>e.unreadCount>0),k=j.filter(e=>0===e.unreadCount);return x?w.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),w.jsx("p",{className:"text-gray-600",children:"Loading your conversations..."})]})}):w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50",children:[w.jsx("div",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200/60 sticky top-0 z-50 shadow-sm",children:w.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8",children:w.jsxs("div",{className:"flex items-center justify-between h-14 sm:h-16",children:[w.jsx("div",{className:"flex items-center gap-4",children:w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(se,{userId:(null==s?void 0:s.id)||(null==s?void 0:s._id),name:(null==s?void 0:s.username)||(null==s?void 0:s.name)||"User",size:"md",online:!0}),w.jsxs("div",{children:[w.jsx("h1",{className:"text-lg font-bold text-gray-900",children:(null==s?void 0:s.username)||(null==s?void 0:s.name)||"Dashboard"}),w.jsx("p",{className:"text-xs text-gray-500",children:"Welcome back!"})]})]})}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("button",{onClick:()=>t("/chat"),className:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg hover:from-indigo-600 hover:to-purple-600 transition-all duration-200 shadow-md hover:shadow-lg font-medium text-sm",children:w.jsxs("span",{className:"flex items-center gap-2",children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"New Chat"]})}),w.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors font-medium text-sm",children:"Logout"})]})]})})}),w.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[w.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/60 shadow-sm hover:shadow-md transition-shadow",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Conversations"}),w.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.length})]}),w.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:w.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})})]})}),w.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/60 shadow-sm hover:shadow-md transition-shadow",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Unread Messages"}),w.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N.reduce((e,t)=>e+t.unreadCount,0)})]}),w.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:w.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})]})}),w.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/60 shadow-sm hover:shadow-md transition-shadow",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Online Friends"}),w.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.filter(e=>b(e.userId)).length})]}),w.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:w.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),y.length>0&&w.jsx("div",{className:"mb-6",children:w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:"text",placeholder:"Search conversations...",value:p,onChange:e=>f(e.target.value),className:"w-full px-4 py-3 pl-10 bg-white/80 backdrop-blur-sm border border-gray-200/60 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-400/50 focus:border-indigo-400 text-gray-800 placeholder-gray-400 transition-all shadow-sm"}),w.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),p&&w.jsx("button",{onClick:()=>f(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),j.length>0?w.jsxs("div",{className:"space-y-6",children:[N.length>0&&w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Unread"}),w.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-semibold rounded-full",children:N.length})]}),w.jsx("div",{className:"space-y-2",children:N.map(e=>w.jsx(me,{user:e.user,lastMessage:e.lastMessage,unreadCount:e.unreadCount,isOnline:b(e.userId),onClick:v},e.userId))})]}),k.length>0&&w.jsxs("div",{children:[N.length>0&&w.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recent"}),w.jsx("div",{className:"space-y-2",children:k.map(e=>w.jsx(me,{user:e.user,lastMessage:e.lastMessage,unreadCount:e.unreadCount,isOnline:b(e.userId),onClick:v},e.userId))})]})]}):0===y.length?w.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-12 border border-gray-200/60 shadow-sm text-center",children:[w.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full flex items-center justify-center",children:w.jsx("svg",{className:"w-10 h-10 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),w.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Start Your First Conversation"}),w.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"You don't have any active conversations yet. Click the button below to search for users and start chatting!"}),w.jsx("button",{onClick:()=>t("/chat"),className:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all duration-200 shadow-lg hover:shadow-xl font-semibold",children:"Start New Chat"})]}):w.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-12 border border-gray-200/60 shadow-sm text-center",children:[w.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:w.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),w.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No conversations found"}),w.jsx("p",{className:"text-gray-600",children:"Try adjusting your search query"})]})]})]})},he=()=>{const e=n(),{isAuthenticated:t}=Y(),s=()=>{e(t?"/dashboard":"/",{replace:!0})};return w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-100 via-purple-50 to-pink-50 px-4 py-8",children:w.jsxs("div",{className:"max-w-md w-full text-center",children:[w.jsxs("div",{className:"mb-8",children:[w.jsx("div",{className:"text-9xl font-bold text-indigo-200 mb-4",children:"404"}),w.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 mb-4",children:"Page Not Found"}),w.jsx("p",{className:"text-gray-600 text-lg mb-8",children:"The page you're looking for doesn't exist or has been moved."})]}),w.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[w.jsx("button",{onClick:s,className:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Go Home"}),w.jsx("button",{onClick:()=>{window.history.length>1?e(-1):s()},className:"px-6 py-3 bg-white text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-all duration-300 border border-gray-200 shadow-md hover:shadow-lg",children:"Go Back"})]}),w.jsx("div",{className:"mt-8 text-sm text-gray-500",children:w.jsx("p",{children:"If you believe this is an error, please contact support."})})]})})};function xe(){const{isAuthenticated:t,initAuth:s}=Y();return e.useEffect(()=>{const e=D();e.isValid||C.warn("Environment validation failed",{missing:e.missing}),s().catch(e=>{C.error("Failed to initialize auth",{error:e.message})})},[s]),w.jsx(K,{children:w.jsx(o,{children:w.jsxs(i,{children:[w.jsx(l,{path:"/",element:w.jsx(K,{children:t?w.jsx(d,{to:"/dashboard"}):w.jsx(J,{})})}),w.jsx(l,{path:"/login",element:w.jsx(K,{children:t?w.jsx(d,{to:"/dashboard"}):w.jsx(X,{})})}),w.jsx(l,{path:"/register",element:w.jsx(K,{children:t?w.jsx(d,{to:"/dashboard"}):w.jsx(Q,{})})}),w.jsx(l,{path:"/dashboard",element:w.jsx(K,{children:t?w.jsx(ue,{}):w.jsx(d,{to:"/login"})})}),w.jsx(l,{path:"/chat",element:w.jsx(K,{children:t?w.jsx(ce,{}):w.jsx(d,{to:"/login"})})}),w.jsx(l,{path:"*",element:w.jsx(K,{children:w.jsx(he,{})})})]})})})}window.addEventListener("error",e=>{var t;C.error("Global error caught",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:null==(t=e.error)?void 0:t.stack}),e.preventDefault()}),window.addEventListener("unhandledrejection",e=>{var t;C.error("Unhandled promise rejection",{reason:e.reason,error:(null==(t=e.reason)?void 0:t.stack)||String(e.reason)}),e.preventDefault()}),N.createRoot(document.getElementById("root")).render(w.jsx(s.StrictMode,{children:w.jsx(xe,{})}));
