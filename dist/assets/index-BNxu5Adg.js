import{r as e,a as t,R as s,L as r,u as i,B as n,b as a,c as o,N as l}from"./react-vendors-aqD4jjz2.js";import{a as c,c as d}from"./ui-B5hUH1ea.js";import{l as u}from"./socket-DNoO1m3r.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var h={exports:{}},m={},g=e,p=Symbol.for("react.element"),x=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,v=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function b(e,t,s){var r,i={},n=null,a=null;for(r in void 0!==s&&(n=""+s),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(a=t.ref),t)f.call(t,r)&&!y.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:p,type:e,key:n,ref:a,props:i,_owner:v.current}}m.Fragment=x,m.jsx=b,m.jsxs=b,h.exports=m;var w=h.exports,j={},N=t;j.createRoot=N.createRoot,j.hydrateRoot=N.hydrateRoot;const S=new class{constructor(e="D-Lite"){this.prefix=e}getTimestamp(){return(new Date).toISOString()}formatLog(e,t,s={}){return{timestamp:this.getTimestamp(),level:e,message:t,...s}}error(e,t={}){this.formatLog("ERROR",e,t)}warn(e,t={}){this.formatLog("WARN",e,t)}info(e,t={}){this.formatLog("INFO",e,t)}debug(e,t={}){}}("D-Lite"),C=(e,t="API Call")=>{var s,r;if(e.response){const r=e.response.status,i=(null==(s=e.response.data)?void 0:s.message)||"An error occurred";return S.error(`${t}: Server Error ${r}`,{status:r,message:i,data:e.response.data}),{status:r,message:i,isClientError:r>=400&&r<500,isServerError:r>=500}}return e.request?(S.error(`${t}: No Response`,{message:"Server did not respond",URL:e.request.URL||(null==(r=e.config)?void 0:r.url)}),{status:null,message:"Server did not respond. Check your connection.",isClientError:!1,isServerError:!0}):(S.error(`${t}: Client Error`,{message:e.message}),{status:null,message:e.message||"An unexpected error occurred",isClientError:!0,isServerError:!1})},k=parseInt("30000"),E=c.create({baseURL:"https://d-lite-auth-service-production.up.railway.app",timeout:k,headers:{"Content-Type":"application/json"}});E.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),E.interceptors.response.use(e=>e,e=>{const t=C(e,"Auth Service");return Promise.reject(t)});const T=async(e,t,s)=>{var r,i;try{S.info("Attempting user registration",{username:e,email:t});const n=await E.post("/api/auth/register",{username:e,email:t,password:s});return S.info("Registration successful",{userId:null==(i=null==(r=n.data)?void 0:r.user)?void 0:i.id}),n.data}catch(n){throw S.error("Registration failed",{error:n.message}),n}},A=async(e,t)=>{var s,r;try{S.info("Attempting login",{email:e});const i=await E.post("/api/auth/login",{email:e,password:t});return S.info("Login successful",{userId:null==(r=null==(s=i.data)?void 0:s.user)?void 0:r.id}),i.data}catch(i){throw S.error("Login failed",{error:i.message}),i}},M=async()=>{try{S.debug("Verifying token");return(await E.get("/api/auth/verify")).data}catch(e){throw S.warn("Token verification failed",{error:e.message}),e}},_=async e=>{try{S.debug("Fetching user",{userId:e});return(await E.get(`/api/users/${e}`)).data}catch(t){throw S.error("Failed to fetch user",{userId:e,error:t.message}),t}},I=async e=>{try{S.debug("Searching users",{query:e});return(await E.get("/api/users/search",{params:{q:e}})).data}catch(t){throw S.error("Failed to search users",{query:e,error:t.message}),t}};const L=new class{constructor(){this.socket=null,this.isConnected=!1,this.listeners=new Map,this.reconnectAttempts=0,this.maxReconnectAttempts=5}connect(e){var t;if(null==(t=this.socket)?void 0:t.connected)return S.debug("Socket already connected"),Promise.resolve();const s="https://d-lite-socket-gateway-production.up.railway.app";return new Promise((t,r)=>{try{S.info("Connecting to Socket Gateway",{url:s}),this.socket=u(s,{auth:{token:e},transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:this.maxReconnectAttempts,timeout:2e4}),this.socket.on("connect",()=>{S.info("Socket connected successfully"),this.isConnected=!0,this.reconnectAttempts=0,t()}),this.socket.on("disconnect",e=>{S.warn("Socket disconnected",{reason:e}),this.isConnected=!1,this.cleanupListeners()}),this.socket.on("connect_error",e=>{S.warn("Socket connection error",{error:e.message}),this.reconnectAttempts++,this.reconnectAttempts>=this.maxReconnectAttempts&&(S.error("Max reconnection attempts reached"),r(e))}),this.socket.on("error",e=>{S.error("Socket error",{error:(null==e?void 0:e.message)||String(e)})})}catch(i){S.error("Failed to initialize socket connection",{error:i.message}),r(i)}})}disconnect(){try{this.socket&&(S.info("Disconnecting socket"),this.cleanupListeners(),this.socket.disconnect(),this.socket=null,this.isConnected=!1)}catch(e){S.error("Error during socket disconnect",{error:e.message})}}isSocketConnected(){var e;return(null==(e=this.socket)?void 0:e.connected)||!1}setupPresenceTracking(e){if(!this.socket)return null;const{onOnlineUsersUpdate:t,onUserConnected:s,onUserDisconnected:r,onUserTyping:i,onUserStoppedTyping:n}=e||{};return t&&this.socket.on("online_users",e=>{t(e)}),s&&this.socket.on("user_connected",e=>{s(e.userId||e)}),r&&this.socket.on("user_disconnected",e=>{r(e.userId||e)}),i&&this.socket.on("user_typing",e=>{i(e.userId||e)}),n&&this.socket.on("user_stopped_typing",e=>{n(e.userId||e)}),()=>{this.socket&&(this.socket.off("online_users"),this.socket.off("user_connected"),this.socket.off("user_disconnected"),this.socket.off("user_typing"),this.socket.off("user_stopped_typing"))}}onMessage(e){this.socket&&(this.socket.on("receive_message",e),this.listeners.set("receive_message",e))}offMessage(e){this.socket&&(this.socket.off("receive_message",e),this.listeners.delete("receive_message"))}sendMessage(e){if(!this.socket||!this.isConnected)throw new Error("Socket not connected");this.socket.emit("send_message",e)}joinGroup(e){this.socket&&this.isConnected&&this.socket.emit("join_group",{group_id:e})}leaveGroup(e){this.socket&&this.isConnected&&this.socket.emit("leave_group",{group_id:e})}sendTyping(e,t=null){if(!this.socket||!this.isConnected)return;const s=t?{group_id:t}:{receiver_id:e};this.socket.emit("typing",s)}sendStopTyping(e,t=null){if(!this.socket||!this.isConnected)return;const s=t?{group_id:t}:{receiver_id:e};this.socket.emit("stop_typing",s)}cleanupListeners(){this.socket&&(this.listeners.forEach((e,t)=>{this.socket.off(t,e)}),this.listeners.clear())}getSocket(){return this.socket}},P=d((e,t)=>({user:null,token:localStorage.getItem("token")||null,isAuthenticated:!!localStorage.getItem("token"),loading:!1,error:null,login:async(t,s)=>{var r,i;e({loading:!0,error:null});try{const r=await A(t,s);localStorage.setItem("token",r.token);try{await L.connect(r.token)}catch(n){}return e({user:r.user,token:r.token,isAuthenticated:!0,loading:!1,error:null}),r}catch(a){throw e({loading:!1,error:(null==(i=null==(r=a.response)?void 0:r.data)?void 0:i.message)||"Login failed"}),a}},register:async(t,s,r)=>{var i,n;e({loading:!0,error:null});try{const i=await T(t,s,r);localStorage.setItem("token",i.token);try{await L.connect(i.token)}catch(a){}return e({user:i.user,token:i.token,isAuthenticated:!0,loading:!1,error:null}),i}catch(o){throw e({loading:!1,error:(null==(n=null==(i=o.response)?void 0:i.data)?void 0:n.message)||"Registration failed"}),o}},logout:()=>{L.disconnect(),localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1,error:null})},clearError:()=>e({error:null}),initAuth:async()=>{const t=localStorage.getItem("token");if(t)try{const r=await M();e({user:r.user,token:t,isAuthenticated:!0});try{await L.connect(t)}catch(s){}}catch(s){localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}}})),R=c.create({baseURL:"https://d-lite-presence-engine.onrender.com",headers:{"Content-Type":"application/json"}});R.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const V=async e=>(await R.get(`/presence/${e}`)).data,U=async()=>(await R.get("/presence/all-active")).data,D=async e=>(await R.put("/presence/focus-mode",{enabled:e})).data,F=async e=>(await R.put("/presence/invisible",{enabled:e})).data,O=e.createContext(),z=()=>{const t=e.useContext(O);if(!t)throw new Error("usePresence must be used within PresenceProvider");return t},$=({children:t})=>{const{user:s,isAuthenticated:r}=P(),[i,n]=e.useState({}),[a,o]=e.useState(null),[l,c]=e.useState(!1),d=e.useCallback(async()=>{if(r)try{const e=await U(),t={};e.users.forEach(e=>{t[e.userId]=e}),n(t)}catch(e){}},[r]),u=e.useCallback(async e=>{try{const t=await V(e);return n(s=>({...s,[e]:t})),t}catch(t){return null}},[]),h=e.useCallback(async()=>{if(null==s?void 0:s.id)try{const e=await V(s.id);return o(e),e}catch(e){return null}},[s]),m=e.useCallback(async e=>{c(!0);try{const t=await D(e);return o(t.presence),t}catch(t){throw t}finally{c(!1)}},[]),g=e.useCallback(async e=>{c(!0);try{const t=await F(e);return o(t.presence),t}catch(t){throw t}finally{c(!1)}},[]),p=e.useCallback(e=>i[e]||null,[i]);e.useEffect(()=>{if(!r)return;d(),h();const e=setInterval(()=>{d(),h()},1e4);return()=>clearInterval(e)},[r,d,h]);const x={presenceMap:i,myPresence:a,loading:l,fetchAllPresence:d,fetchUserPresence:u,fetchMyPresence:h,toggleFocusMode:m,toggleInvisibleMode:g,getPresence:p};return w.jsx(O.Provider,{value:x,children:t})},q=c.create({baseURL:"https://d-lite-ai-engine.onrender.com",headers:{"Content-Type":"application/json"}});q.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const B=async(e,t)=>{try{return(await q.post("/ai/analyze-message",{text:e,userId:t})).data}catch(s){return null}},G=async(e,t)=>{try{return(await q.post("/ai/generate-replies",{lastMessages:e,userIdentity:t})).data.suggestions||[]}catch(s){return[]}},H=async e=>{try{return(await q.get(`/ai/profile/${e}`)).data}catch(t){return null}},W=async(e,t=[])=>{try{return(await q.post("/ai/predict-presence",{userId:e,activityHistory:t})).data}catch(s){return null}},Y=parseInt("30000"),Q=c.create({baseURL:"https://d-lite-chat-service.onrender.com",timeout:Y,headers:{"Content-Type":"application/json"}});Q.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),Q.interceptors.response.use(e=>e,e=>{const t=C(e,"Chat Service");return Promise.reject(t)});const K=async(e,t,s,r=null,i=null)=>(await Q.post("/api/messages",{sender_id:e,receiver_id:t,content:s,group_id:r,expires_at:i})).data,X=async(e,t,s=100,r=0)=>(await Q.get(`/api/messages/${e}/${t}`,{params:{limit:s,skip:r}})).data,J=async e=>(await Q.get(`/api/conversations/${e}`)).data,Z=async e=>(await Q.patch(`/api/messages/${e}/read`)).data,ee=d((e,t)=>({users:[],groups:[],messages:[],selectedUser:null,selectedGroup:null,onlineUsers:new Set,conversations:{},setUsers:t=>e({users:t}),setGroups:t=>e({groups:t}),setConversations:t=>{const s={};t.forEach(e=>{s[e.user_id]={unread_count:e.unread_count,last_message:e.last_message}}),e({conversations:s})},setSelectedUser:t=>{e({selectedUser:t,selectedGroup:null}),e({messages:[]})},setSelectedGroup:t=>{if(e({selectedGroup:t,selectedUser:null}),e({messages:[]}),t){const e=t._id||t.id;L.joinGroup(e)}},addMessage:t=>{e(e=>({messages:[...e.messages,t]}))},setMessages:t=>e({messages:t}),updateOnlineUsers:t=>{e({onlineUsers:new Set(t)})},addOnlineUser:t=>{e(e=>{const s=new Set(e.onlineUsers);return s.add(t),{onlineUsers:s}})},removeOnlineUser:t=>{e(e=>{const s=new Set(e.onlineUsers);return s.delete(t),{onlineUsers:s}})},clearChat:()=>{e({selectedUser:null,selectedGroup:null,messages:[]})}})),te=e.createContext(),se=({children:t})=>{const{user:s}=P(),{messages:r,selectedUser:i,selectedGroup:n}=ee(),[a,o]=e.useState([]),[l,c]=e.useState(null),[d,u]=e.useState(null);e.useEffect(()=>{(async()=>{if(!r||0===r.length)return;if(!(null==s?void 0:s.id))return;const e=r.slice(-5).map(e=>e.content||e.text||""),t=await G(e,s);o(t||[])})()},[r,s]),e.useEffect(()=>{(null==s?void 0:s.id)&&H(s.id).then(e=>{e&&u(e)})},[s]);return w.jsx(te.Provider,{value:{smartSuggestions:a,vibeAnalysis:l,aiProfile:d,analyzeInput:async e=>{if(!(null==s?void 0:s.id))return;const t=await B(e,s.id);return c(t),t},predictPresence:async()=>{if(!(null==s?void 0:s.id))return;return await W(s.id,[])}},children:t})},re=()=>e.useContext(te),ie=c.create({baseURL:"http://localhost:3004",headers:{"Content-Type":"application/json"}});ie.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const ne=async e=>{try{return(await ie.get(`/aura/${e}`)).data}catch(t){return null}},ae=async e=>{try{return(await ie.get(`/soul/${e}`)).data}catch(t){return null}},oe=async e=>{try{return(await ie.get(`/insight/${e}`)).data}catch(t){return null}},le=d((e,t)=>({aura:null,roomSoul:null,energyWave:null,loading:!1,error:null,fetchRoomAura:async t=>{try{const s=await ne(t);return e({aura:s}),s}catch(s){return e({error:s.message}),null}},fetchRoomSoul:async t=>{try{const s=await ae(t);return e({roomSoul:s}),s}catch(s){return e({error:s.message}),null}},fetchEnergyWave:async t=>{try{const s=await oe(t);return e({energyWave:s}),s}catch(s){return e({error:s.message}),null}},refreshRoomData:async e=>{if(!e)return;const[s,r,i]=await Promise.all([t().fetchRoomAura(e),t().fetchRoomSoul(e),t().fetchEnergyWave(e)]);return{aura:s,soul:r,wave:i}}})),ce="linear-gradient(135deg, #f5f3ff 0%, #ede9fe 50%, #ddd6fe 100%)",de="linear-gradient(135deg, #faf9ff 0%, #f5f3ff 25%, #ede9fe 50%, #ddd6fe 75%, #c4b5fd 100%)",ue="linear-gradient(135deg, #ecfeff 0%, #cffafe 50%, #a5f3fc 100%)",he="linear-gradient(135deg, #faf5ff 0%, #f3e8ff 50%, #e9d5ff 100%)",me=(e,t=document.documentElement)=>{const{backgroundGradient:s,currentMood:r,pulseSpeed:i,energyLevel:n,uiMode:a,focusModeActive:o}=e||{},l=(e=>{const{backgroundGradient:t,currentMood:s,energyLevel:r}=e||{};return t&&t.length>0?`linear-gradient(135deg, ${t.join(", ")})`:{calm:ue,focused:he,meditative:ue,balanced:ce,chaotic:"linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #fcd34d 100%)",deep:"linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 50%, #a5b4fc 100%)",funny:"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 50%, #f9a8d4 100%)"}[s]||de})(e);t.style.setProperty("--sentient-bg",l),t.style.setProperty("--sentient-pulse-speed",`${i||1}s`),t.style.setProperty("--sentient-energy",n||0);const c=(e=>{const t={normal:{sidebarWidth:"320px",opacity:1,blur:"0px"},minimal:{sidebarWidth:"240px",opacity:.9,blur:"2px"},whisper:{sidebarWidth:"200px",opacity:.7,blur:"4px"}};return t[e]||t.normal})(a);t.style.setProperty("--sentient-sidebar-width",c.sidebarWidth),t.style.setProperty("--sentient-ui-opacity",c.opacity),t.style.setProperty("--sentient-ui-blur",c.blur),t.style.setProperty("--sentient-focus-mode",o?"1":"0"),t.setAttribute("data-sentient-mood",r||"balanced"),t.setAttribute("data-sentient-mode",a||"normal")},ge=e.createContext(),pe=()=>{const t=e.useContext(ge);if(!t)throw new Error("useSentient must be used within SentientProvider");return t},xe=({children:t})=>{const{myPresence:s,presenceMap:r}=z(),{vibeAnalysis:i}=re(),{selectedGroup:n,messages:a}=ee(),{aura:o,roomSoul:l,energyWave:c}=le(),[d,u]=e.useState({roomMood:"balanced",auraColor:"#a5f3fc",heatLevel:"low",activityLevel:0,vibeState:"neutral",energyLevel:0,backgroundGradient:[],currentMood:"balanced",pulseSpeed:1,uiMode:"normal",focusModeActive:!1}),h=e.useCallback(()=>{var e,t;const i=[];return(null==(e=null==o?void 0:o.data)?void 0:e.collectiveGradient)&&o.data.collectiveGradient.length>0?i.push(...o.data.collectiveGradient):(null==(t=null==o?void 0:o.data)?void 0:t.roomAuraColor)&&i.push(o.data.roomAuraColor),Object.values(r).forEach(e=>{e.auraColor&&i.push(e.auraColor)}),(null==s?void 0:s.auraColor)&&i.push(s.auraColor),0===i.length&&i.push("#f5f3ff","#ede9fe","#ddd6fe"),i},[o,r,s]);e.useEffect(()=>{var e,t,r,n;const a={roomMood:(null==(e=null==l?void 0:l.data)?void 0:e.roomMood)||"balanced",auraColor:(null==(t=null==o?void 0:o.data)?void 0:t.roomAuraColor)||(null==s?void 0:s.auraColor)||"#a5f3fc",heatLevel:(null==s?void 0:s.heatLevel)||"low",activityLevel:(null==s?void 0:s.activityLevel)||0,vibeState:(null==i?void 0:i.vibeState)||"neutral",energyLevel:(null==(r=null==l?void 0:l.data)?void 0:r.roomEnergyLevel)||(null==c?void 0:c.intensity)||0,backgroundGradient:h(),currentMood:(null==(n=null==l?void 0:l.data)?void 0:n.roomMood)||(null==i?void 0:i.vibeState)||"balanced",pulseSpeed:(null==c?void 0:c.pulseSpeed)||1,uiMode:(null==s?void 0:s.focusMode)?"minimal":"normal",focusModeActive:(null==s?void 0:s.focusMode)||!1};u(a),me(a)},[l,o,s,i,c,h]),e.useCallback(async()=>{},[]);const m=e.useMemo(()=>({sentientState:d,roomMood:d.roomMood,auraColor:d.auraColor,heatLevel:d.heatLevel,activityLevel:d.activityLevel,vibeState:d.vibeState,energyLevel:d.energyLevel,backgroundGradient:d.backgroundGradient,currentMood:d.currentMood,pulseSpeed:d.pulseSpeed,uiMode:d.uiMode,focusModeActive:d.focusModeActive}),[d]);return w.jsx(ge.Provider,{value:m,children:t})},fe="undefined"!=typeof window;const ve=new class{constructor(){this.chatFrequency=new Map,this.navigationHistory=[],this.eventQueue=[],this.listeners=new Set,this.sessionStartTime=Date.now(),this.idleCallbackId=null,this.typingPatterns={lastTypingAt:0,lastChangeAt:0,typingSpeed:"normal",pauseThreshold:1800,intervals:[]}}subscribe(e){return"function"!=typeof e?()=>{}:(this.listeners.add(e),()=>{this.listeners.delete(e)})}notifyListeners(){const e=this.getSnapshot();this.listeners.forEach(t=>t(e))}scheduleFlush(){var e;null==this.idleCallbackId&&(this.idleCallbackId=(e=()=>{this.idleCallbackId=null,this.flushQueue()},fe&&"function"==typeof window.requestIdleCallback?window.requestIdleCallback(e,{timeout:250}):setTimeout(e,250)))}enqueue(e){this.eventQueue.push(e),this.scheduleFlush()}flushQueue(){if(0===this.eventQueue.length)return;this.eventQueue.splice(0,this.eventQueue.length).forEach(e=>{if("chat-access"===e.type){const t=this.chatFrequency.get(e.chatId)||0;this.chatFrequency.set(e.chatId,t+1),this.navigationHistory.push({chatId:e.chatId,timestamp:e.time}),this.navigationHistory.length>80&&this.navigationHistory.shift()}"typing"===e.type&&this.processTypingEvent(e)}),this.notifyListeners()}processTypingEvent(e){const{isTyping:t,time:s}=e;if(t){if(this.typingPatterns.lastChangeAt>0){const e=s-this.typingPatterns.lastChangeAt;e>0&&(this.typingPatterns.intervals.push(e),this.typingPatterns.intervals.length>25&&this.typingPatterns.intervals.shift())}return this.typingPatterns.lastTypingAt=s,this.typingPatterns.lastChangeAt=s,void(this.typingPatterns.typingSpeed=this.calculateTypingSpeed())}this.typingPatterns.lastChangeAt=s,this.typingPatterns.typingSpeed=this.calculateTypingSpeed()}calculateTypingSpeed(){const{intervals:e}=this.typingPatterns;if(e.length<3)return"normal";const t=e.reduce((e,t)=>e+t,0)/e.length;return t<=140?"fast":t>=320?"slow":"normal"}trackChatAccess(e){e&&this.enqueue({type:"chat-access",chatId:String(e),time:Date.now()})}trackTyping(e){const t="boolean"==typeof e?{isTyping:e}:{isTyping:Boolean(null==e?void 0:e.isTyping)};this.enqueue({type:"typing",...t,time:Date.now()})}getFrequentChats(e=5){return Array.from(this.chatFrequency.entries()).sort((e,t)=>t[1]-e[1]).slice(0,e).map(([e])=>e)}getRecentChats(e=5){const t=new Set,s=[];for(let r=this.navigationHistory.length-1;r>=0;r-=1){const{chatId:i}=this.navigationHistory[r];if(!t.has(i)&&(t.add(i),s.push(i),s.length===e))break}return s}isUserPausing(){if(!this.typingPatterns.lastTypingAt)return!1;return Date.now()-this.typingPatterns.lastTypingAt>this.typingPatterns.pauseThreshold}getTypingSpeed(){return this.typingPatterns.typingSpeed}getSessionDuration(){return Math.floor((Date.now()-this.sessionStartTime)/1e3)}getSnapshot(){return{topChats:this.getFrequentChats(5),recentChats:this.getRecentChats(6),typingSpeed:this.getTypingSpeed(),isPausing:this.isUserPausing(),sessionDuration:this.getSessionDuration(),totalInteractions:this.navigationHistory.length}}reset(){var e;null!=(e=this.idleCallbackId)&&(fe&&"function"==typeof window.cancelIdleCallback?window.cancelIdleCallback(e):clearTimeout(e)),this.idleCallbackId=null,this.chatFrequency.clear(),this.navigationHistory=[],this.eventQueue=[],this.typingPatterns={lastTypingAt:0,lastChangeAt:0,typingSpeed:"normal",pauseThreshold:1800,intervals:[]},this.sessionStartTime=Date.now(),this.notifyListeners()}};const ye=new class{constructor(){this.currentLayout={spacing:"normal",panelVisibility:{sidebar:!0,suggestions:!0,reactions:!0,quickActions:!0},inputMode:"normal",contextualActions:{showExpandThought:!1,showEmojiShortcut:!1}}}applySpacingForHeat(e="normal",t=0){let s="normal";const r=Number(t)>=70,i=Number(t)<=20;return"high"===e||"critical"===e||r?(s="relaxed",this.setCSSVariable("--ux-spacing-multiplier","1.18"),this.setCSSVariable("--ux-chat-gap","1rem")):"low"!==e&&"idle"!==e||!i?(s="normal",this.setCSSVariable("--ux-spacing-multiplier","1"),this.setCSSVariable("--ux-chat-gap","0.75rem")):(s="compact",this.setCSSVariable("--ux-spacing-multiplier","0.9"),this.setCSSVariable("--ux-chat-gap","0.6rem")),this.currentLayout.spacing=s,s}optimizeInputArea(e,t){t?(this.setInputMode("expanded"),this.setCSSVariable("--ux-input-height","auto"),this.setCSSVariable("--ux-suggestions-visible","1"),this.setPanelVisibility("suggestions",!0)):"fast"===e?(this.setInputMode("collapsed"),this.setCSSVariable("--ux-input-height","48px"),this.setCSSVariable("--ux-suggestions-visible","0.3"),this.setPanelVisibility("suggestions",!1)):(this.setInputMode("normal"),this.setCSSVariable("--ux-input-height","64px"),this.setCSSVariable("--ux-suggestions-visible","1"),this.setPanelVisibility("suggestions",!0))}applyFocusMode(e){e?(this.setPanelVisibility("sidebar",!0),this.setPanelVisibility("suggestions",!1),this.setPanelVisibility("reactions",!1),this.setPanelVisibility("quickActions",!1),this.setCSSVariable("--ux-focus-mode","1"),this.setCSSVariable("--ux-chat-width","100%")):(this.setPanelVisibility("sidebar",!0),this.setPanelVisibility("suggestions",!0),this.setPanelVisibility("reactions",!0),this.setPanelVisibility("quickActions",!0),this.setCSSVariable("--ux-focus-mode","0"),this.setCSSVariable("--ux-chat-width","auto"))}applyContextualActions(e,t){const s="focused"!==e&&"stressed"!==t,r=String(e||"").toLowerCase(),i=String(t||"").toLowerCase();if(s){this.setCSSVariable("--ux-actions-visible","1"),this.setCSSVariable("--ux-actions-opacity","0.8"),this.setCSSVariable("--ux-action-expand-visible","0"),this.setCSSVariable("--ux-action-emoji-visible","0");const e="deep"===r||"calm"===r||"contemplative"===i||"philosophical"===i;e&&this.setCSSVariable("--ux-action-expand-visible","1");const t="energetic"===r||"chaotic"===r||"excited"===i||"joyful"===i;t&&this.setCSSVariable("--ux-action-emoji-visible","1"),this.currentLayout.contextualActions={showExpandThought:e,showEmojiShortcut:t}}else this.setCSSVariable("--ux-actions-visible","0"),this.setCSSVariable("--ux-actions-opacity","0.2"),this.setCSSVariable("--ux-action-expand-visible","0"),this.setCSSVariable("--ux-action-emoji-visible","0"),this.currentLayout.contextualActions={showExpandThought:!1,showEmojiShortcut:!1}}applySoftAttention(e,t){const s="--ux-attention",r="0.5";if(t)switch(e){case"mention":this.setCSSVariable(`${s}-mention`,"0.9");break;case"reply":this.setCSSVariable(`${s}-reply`,"0.82");break;case"focus-chat":this.setCSSVariable(`${s}-focus-chat`,"0.85")}else switch(e){case"mention":this.setCSSVariable(`${s}-mention`,r);break;case"reply":this.setCSSVariable(`${s}-reply`,r);break;case"focus-chat":this.setCSSVariable(`${s}-focus-chat`,r)}}setTransitionSpeed(e){let t="300ms";"calm"===e||"deep"===e?t="500ms":"energetic"===e&&(t="150ms"),this.setCSSVariable("--ux-transition-duration",t)}setInputMode(e){this.currentLayout.inputMode=e,this.applyDataAttribute("data-ux-input-mode",e)}setPanelVisibility(e,t){this.currentLayout.panelVisibility[e]=t,this.setCSSVariable(`--ux-panel-${e}-visible`,t?"1":"0")}setCSSVariable(e,t){const s=this.getRoot();s&&s.style.setProperty(e,t)}applyDataAttribute(e,t){const s=this.getRoot();s&&s.setAttribute(e,t)}getRoot(){return"undefined"==typeof document?null:document.documentElement}getSnapshot(){return{...this.currentLayout}}reset(){this.currentLayout={spacing:"normal",panelVisibility:{sidebar:!0,suggestions:!0,reactions:!0,quickActions:!0},inputMode:"normal",contextualActions:{showExpandThought:!1,showEmojiShortcut:!1}};const e=this.getRoot();e&&(e.removeAttribute("style"),e.removeAttribute("data-ux-input-mode"))}};const be=new class{constructor(){this.predictions={nextChatId:null,likelyAction:null,confidenceScore:0,timeToNextAction:null},this.actionHistory=[],this.patterns=new Map}predictNextChat(e,t){if(!e||0===e.length)return this.predictions.nextChatId=null,this.predictions.confidenceScore=0,null;if(e.length>=3){const t=e.slice(0,3);if(t[0]!==t[1]&&t[1]!==t[2]&&t[0]===t[2])return this.predictions.nextChatId=t[1],this.predictions.confidenceScore=.85,{chatId:t[1],confidence:.85}}return t&&t.length>0?(this.predictions.nextChatId=t[0],this.predictions.confidenceScore=.6,{chatId:t[0],confidence:.6}):null}predictNextAction(e,t,s,r){let i=null,n=0;return e>3&&(i="react",n=.7),"fast"!==t||s||(i="compose",n=.8),s&&"slow"!==t&&(i="fast"===t?"search":"browse",n=.6),"deep"!==r&&"calm"!==r||(i="browse",n=.65),this.predictions.likelyAction=i,this.predictions.confidenceScore=n,{action:i,confidence:n}}estimateTimeToAction(e,t){let s=6e4;return"fast"===e?s=3e4:"slow"===e&&(s=12e4),t<300?s*=.8:t>1800&&(s*=1.3),this.predictions.timeToNextAction=s,s}getPrioritizedChats(e,t,s){const r=[],i=new Set;return this.predictions.nextChatId&&this.predictions.confidenceScore>.6&&(r.push(this.predictions.nextChatId),i.add(this.predictions.nextChatId)),null==e||e.forEach(e=>{!i.has(e)&&r.length<5&&(r.push(e),i.add(e))}),null==s||s.forEach(e=>{!i.has(e)&&r.length<8&&(r.push(e),i.add(e))}),r}shouldShowSearch(e,t,s){return e&&"fast"!==t&&("calm"===s||"balanced"===s)}shouldShowCompositionAssist(e,t,s){return!t&&"slow"!==e&&("energetic"===s||"balanced"===s)}getSnapshot(){return{...this.predictions}}reset(){this.predictions={nextChatId:null,likelyAction:null,confidenceScore:0,timeToNextAction:null},this.actionHistory=[]}};const we=new class{constructor(){this.listeners=new Set,this.focusMode={active:!1,autoTriggered:!1,hiddenElements:new Set},this.triggerThresholds={contiguousTypingMs:9e4,highActivityDuration:12e4,highActivityLevel:70,inactivityMs:12e4},this.activityTracker={typing:!1,typingStartTime:null,lastActivityTime:Date.now(),highActivityStartTime:null},this.externalFocusMode=!1}subscribe(e){return"function"!=typeof e?()=>{}:(this.listeners.add(e),()=>{this.listeners.delete(e)})}notifyListeners(){const e=this.getState();this.listeners.forEach(t=>t(e))}getRoot(){return"undefined"==typeof document?null:document.documentElement}getEffectiveActiveState(){return this.focusMode.active||this.externalFocusMode}setExternalFocusMode(e){const t=Boolean(e);this.externalFocusMode!==t&&(this.externalFocusMode=t,this.applyFocusMode(this.getEffectiveActiveState()),this.notifyListeners())}toggleFocusMode(e){return this.focusMode.active=Boolean(e),this.focusMode.autoTriggered=!1,this.applyFocusMode(this.getEffectiveActiveState()),this.notifyListeners(),this.getEffectiveActiveState()}updateActivity({isTyping:e=!1,activityLevel:t=0}={}){const s=Date.now();return e&&!this.activityTracker.typing?(this.activityTracker.typing=!0,this.activityTracker.typingStartTime=s):!e&&this.activityTracker.typing&&(this.activityTracker.typing=!1,this.activityTracker.typingStartTime=null),e&&(this.activityTracker.lastActivityTime=s),this.trackHighActivity(t,s),this.maybeAutoEnable(s)}trackHighActivity(e,t){if(Number(e)>=this.triggerThresholds.highActivityLevel)return this.activityTracker.highActivityStartTime||(this.activityTracker.highActivityStartTime=t),void(this.activityTracker.lastActivityTime=t);this.activityTracker.highActivityStartTime=null}maybeAutoEnable(e){if(this.getEffectiveActiveState())return!1;if((this.activityTracker.typingStartTime?e-this.activityTracker.typingStartTime:0)>=this.triggerThresholds.contiguousTypingMs)return this.autoEnableFocusMode("continuous-typing"),!0;return(this.activityTracker.highActivityStartTime?e-this.activityTracker.highActivityStartTime:0)>=this.triggerThresholds.highActivityDuration&&(this.autoEnableFocusMode("high-activity"),!0)}checkInactivity(){if(!this.focusMode.active||!this.focusMode.autoTriggered||this.externalFocusMode)return!1;return Date.now()-this.activityTracker.lastActivityTime>this.triggerThresholds.inactivityMs&&(this.disableFocusMode(),!0)}applyFocusMode(e){const t=this.getRoot();t&&(e?(t.setAttribute("data-focus-mode","true"),t.style.setProperty("--ux-focus-panels-opacity","0.2"),t.style.setProperty("--ux-focus-chat-opacity","1"),t.style.setProperty("--ux-focus-sidebar-width","0"),t.style.setProperty("--ux-focus-margin","0 auto"),t.style.setProperty("--ux-focus-max-width","100%"),t.style.setProperty("--ux-focus-transition","300ms ease-in-out"),this.focusMode.hiddenElements=new Set(["sidebar","suggestions","reactions","status-bar"])):(t.setAttribute("data-focus-mode","false"),t.style.setProperty("--ux-focus-panels-opacity","1"),t.style.setProperty("--ux-focus-chat-opacity","1"),t.style.setProperty("--ux-focus-sidebar-width","auto"),t.style.setProperty("--ux-focus-margin","0"),t.style.setProperty("--ux-focus-max-width","none"),this.focusMode.hiddenElements.clear()))}autoEnableFocusMode(e="auto"){return this.externalFocusMode?{enabled:!1,reason:"external-focus"}:(this.focusMode.active=!0,this.focusMode.autoTriggered=!0,this.applyFocusMode(!0),this.notifyListeners(),{enabled:!0,reason:e,canDismiss:!0})}disableFocusMode(){this.focusMode.active&&(this.focusMode.active=!1,this.focusMode.autoTriggered=!1,this.applyFocusMode(this.getEffectiveActiveState()),this.notifyListeners())}shouldHideSidebar(){return this.getEffectiveActiveState()}isElementHidden(e){return!!this.getEffectiveActiveState()&&this.focusMode.hiddenElements.has(e)}getState(){return{active:this.getEffectiveActiveState(),autoTriggered:this.focusMode.autoTriggered,externalFocusMode:this.externalFocusMode,hiddenElements:Array.from(this.focusMode.hiddenElements)}}getSuggestion(){if(this.getEffectiveActiveState())return null;if((this.activityTracker.typing?Date.now()-this.activityTracker.typingStartTime:0)>.8*this.triggerThresholds.contiguousTypingMs)return{type:"focus-mode-suggestion",message:"You've been typing for a while. Enable focus mode?",action:"enableFocus",dismissible:!0};return(this.activityTracker.highActivityStartTime?Date.now()-this.activityTracker.highActivityStartTime:0)>.8*this.triggerThresholds.highActivityDuration?{type:"focus-mode-suggestion",message:"High activity detected. Switch to focus mode?",action:"enableFocus",dismissible:!0}:null}reset(){this.focusMode.active=!1,this.focusMode.autoTriggered=!1,this.focusMode.hiddenElements.clear(),this.externalFocusMode=!1,this.activityTracker={typing:!1,typingStartTime:null,lastActivityTime:Date.now(),highActivityStartTime:null};const e=this.getRoot();e&&(e.removeAttribute("data-focus-mode"),e.removeAttribute("style")),this.notifyListeners()}},je=(e=[],t=[])=>{if(e===t)return!0;if(e.length!==t.length)return!1;for(let s=0;s<e.length;s+=1)if(e[s]!==t[s])return!1;return!0},Ne=({heatLevel:t="normal",roomMood:s="balanced",vibeState:r="neutral",activityLevel:i=0,externalFocusMode:n=!1}={})=>{const[a,o]=e.useState({frequentChats:[],recentChats:[],typingSpeed:"normal",isUserPausing:!1,spacing:"normal",inputMode:"normal",focusMode:!1,nextPredictedChat:null,likelyAction:null,prioritizedChats:[],shouldShowSearch:!1,shouldShowCompositionAssist:!1,focusModeSuggestion:null,contextualActions:{showExpandThought:!1,showEmojiShortcut:!1}}),l=e.useRef(!1),c=e.useRef({isTyping:!1,activityLevel:i}),d=e.useCallback(()=>{const e=ve.getSnapshot(),n=e.typingSpeed,a=e.isPausing;ye.applySpacingForHeat(t,i),ye.optimizeInputArea(n,a),ye.setTransitionSpeed(s),ye.applyContextualActions(s,r);const o=be.predictNextChat(e.recentChats,e.topChats),c=be.predictNextAction(e.totalInteractions,n,a,s),d=be.getPrioritizedChats(e.recentChats,e.topChats,e.topChats),u=we.getState();ye.applyFocusMode(u.active);const h=ye.getSnapshot(),m=l.current?null:we.getSuggestion();return{frequentChats:e.topChats,recentChats:e.recentChats,typingSpeed:n,isUserPausing:a,spacing:h.spacing,inputMode:h.inputMode,focusMode:u.active,nextPredictedChat:(null==o?void 0:o.chatId)||null,likelyAction:(null==c?void 0:c.action)||null,prioritizedChats:d,shouldShowSearch:be.shouldShowSearch(a,n,s),shouldShowCompositionAssist:be.shouldShowCompositionAssist(n,a,s),focusModeSuggestion:m,contextualActions:h.contextualActions}},[i,t,s,r]),u=e.useCallback(()=>{const e=d();o(t=>{return r=e,(s=t)&&s.typingSpeed===r.typingSpeed&&s.isUserPausing===r.isUserPausing&&s.spacing===r.spacing&&s.inputMode===r.inputMode&&s.focusMode===r.focusMode&&s.nextPredictedChat===r.nextPredictedChat&&s.likelyAction===r.likelyAction&&s.shouldShowSearch===r.shouldShowSearch&&s.shouldShowCompositionAssist===r.shouldShowCompositionAssist&&je(s.frequentChats,r.frequentChats)&&je(s.recentChats,r.recentChats)&&je(s.prioritizedChats,r.prioritizedChats)&&((null==(i=s.focusModeSuggestion)?void 0:i.message)||null)===((null==(n=r.focusModeSuggestion)?void 0:n.message)||null)&&(null==(a=s.contextualActions)?void 0:a.showExpandThought)===(null==(o=r.contextualActions)?void 0:o.showExpandThought)&&(null==(l=s.contextualActions)?void 0:l.showEmojiShortcut)===(null==(c=r.contextualActions)?void 0:c.showEmojiShortcut)?t:e;var s,r,i,n,a,o,l,c})},[d]);e.useEffect(()=>{we.setExternalFocusMode(n)},[n]),e.useEffect(()=>{c.current.activityLevel=i,we.updateActivity({isTyping:c.current.isTyping,activityLevel:i}),u()},[i,u]),e.useEffect(()=>{u();const e=ve.subscribe(u),t=we.subscribe(u),s=setInterval(()=>{we.updateActivity({isTyping:c.current.isTyping,activityLevel:c.current.activityLevel}),we.checkInactivity(),u()},1e3);return()=>{e(),t(),clearInterval(s)}},[u]);const h=e.useCallback(e=>{ve.trackChatAccess(e)},[]),m=e.useCallback(e=>{const t="boolean"==typeof e?e:Boolean(null==e?void 0:e.isTyping);c.current.isTyping=t,ve.trackTyping(e),we.updateActivity({isTyping:t,activityLevel:c.current.activityLevel}),u()},[u]),g=e.useCallback(e=>{"compact"===e?ye.applySpacingForHeat("idle",0):"relaxed"===e?ye.applySpacingForHeat("high",100):ye.applySpacingForHeat("normal",40),u()},[u]),p=e.useCallback(e=>{ye.setInputMode(e),u()},[u]),x=e.useCallback(e=>{we.toggleFocusMode(e),l.current=!1,u()},[u]),f=e.useCallback(()=>{l.current=!0,u()},[u]);return e.useMemo(()=>({...a,trackChatAccess:h,trackTyping:m,setSpacing:g,setInputMode:p,toggleFocusMode:x,dismissFocusModeSuggestion:f,getFrequentChats:()=>ve.getFrequentChats(),getRecentChats:()=>ve.getRecentChats(),getPrioritizedChats:()=>a.prioritizedChats}),[a,h,m,g,p,x,f])},Se=e.createContext(),Ce=()=>{const t=e.useContext(Se);if(!t)throw new Error("useUXEngine must be used within UXEngineProvider");return t},ke=({children:t,heatLevel:s,roomMood:r,vibeState:i,activityLevel:n,focusMode:a})=>{const o=pe(),l=s??(null==o?void 0:o.heatLevel)??"normal",c=r??(null==o?void 0:o.roomMood)??"balanced",d=i??(null==o?void 0:o.vibeState)??"neutral",u=n??(null==o?void 0:o.activityLevel)??0,h=a??(null==o?void 0:o.focusModeActive)??!1,m=Ne({heatLevel:l,roomMood:c,vibeState:d,activityLevel:u,externalFocusMode:h});((t,s,r,i=0,n=!1)=>{e.useEffect(()=>{ye.applySpacingForHeat(t,i),ye.setTransitionSpeed(s),ye.applyContextualActions(s,r),ye.applyFocusMode(n)},[i,n,t,s,r])})(l,c,d,u,m.focusMode);const g=e.useMemo(()=>({signals:m,config:{heatLevel:l,roomMood:c,vibeState:d,activityLevel:u,externalFocusMode:h}}),[m,l,c,d,u,h]);return w.jsx(Se.Provider,{value:g,children:t})};class Ee extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){S.error("React Error Boundary caught error",{error:e.toString(),componentStack:t.componentStack})}render(){return this.state.hasError?w.jsx("div",{className:"flex items-center justify-center min-h-screen bg-red-50",children:w.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md",children:[w.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),w.jsx("p",{className:"text-gray-600 mb-4",children:"An unexpected error occurred. Please refresh the page or try again."}),!1,w.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Refresh Page"})]})}):this.props.children}}const Te={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_AI_ENGINE_URL:"https://d-lite-ai-engine.onrender.com",VITE_ANALYTICS_ENDPOINT:"",VITE_API_TIMEOUT:"30000",VITE_APP_NAME:"D-Lite",VITE_AUTH_SERVICE_URL:"https://d-lite-auth-service-production.up.railway.app",VITE_AUTO_LOAD_THRESHOLD:"500",VITE_CACHE_VERSION:"1",VITE_CHAT_SERVICE_URL:"https://d-lite-chat-service.onrender.com",VITE_DEBUG_API:"false",VITE_ENABLE_AI_ENGINE:"true",VITE_ENABLE_ANALYTICS:"false",VITE_ENABLE_ANIMATIONS:"true",VITE_ENABLE_CONSOLE_LOGS:"true",VITE_ENABLE_IDENTITY_SERVICE:"true",VITE_ENABLE_LOCAL_CACHE:"true",VITE_ENABLE_NOTIFICATION_SOUND:"true",VITE_ENABLE_PRESENCE_ENGINE:"true",VITE_ENABLE_REACT_DEVTOOLS:"true",VITE_ENABLE_REDUX_DEVTOOLS:"true",VITE_ENABLE_quntam_ROOMS:"true",VITE_ENVIRONMENT:"production",VITE_IDENTITY_SERVICE_URL:"https://d-lite-identity-system.onrender.com",VITE_LOG_LEVEL:"info",VITE_MESSAGES_PER_PAGE:"20",VITE_NOTIFICATION_TIMEOUT:"5000",VITE_PRESENCE_ENGINE_URL:"https://d-lite-presence-engine.onrender.com",VITE_PRESENCE_UPDATE_INTERVAL:"5000",VITE_QUANTUM_ROOM_ENGINE_URL:"http://localhost:3004",VITE_SECURE_COOKIES:"false",VITE_SOCKET_GATEWAY_URL:"https://d-lite-socket-gateway-production.up.railway.app",VITE_THEME:"auto",VITE_TOKEN_REFRESH_INTERVAL:"300000",VITE_TYPING_INDICATOR_TIMEOUT:"3000",VITE_WS_RECONNECT_ATTEMPTS:"5",VITE_WS_RECONNECT_DELAY:"1000",VITE_WS_TIMEOUT:"10000",VITE_quntam_ROOM_ENGINE_URL:"https://d-lite-quntam-room-engine.onrender.com"},Ae=["VITE_AUTH_SERVICE_URL","VITE_CHAT_SERVICE_URL","VITE_SOCKET_GATEWAY_URL","VITE_IDENTITY_SERVICE_URL","VITE_QUANTUM_ROOM_ENGINE_URL","VITE_AI_ENGINE_URL","VITE_PRESENCE_ENGINE_URL"],Me=()=>{const{isAuthenticated:t}=P(),[s,i]=e.useState({x:0,y:0}),[n,a]=e.useState(!1),[o,l]=e.useState(!1),[c,d]=e.useState("");e.useEffect(()=>{const e=e=>{i({x:e.clientX/window.innerWidth*100,y:e.clientY/window.innerHeight*100})},t=()=>{a(window.scrollY>20)};return window.addEventListener("mousemove",e),window.addEventListener("scroll",t),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("scroll",t)}},[]);return w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 via-pink-50 to-rose-50 relative overflow-hidden",children:[w.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[w.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob",style:{transform:`translate(${.02*s.x}px, ${.02*s.y}px)`}}),w.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-pink-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000",style:{transform:`translate(${.02*-s.x}px, ${.02*-s.y}px)`}}),w.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-indigo-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-4000",style:{transform:`translate(${.01*s.x}px, ${.01*s.y}px)`}})]}),w.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 px-6 py-4 transition-all duration-300 "+(n?"bg-white/80 backdrop-blur-lg shadow-md":"bg-transparent"),children:[w.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[w.jsxs(r,{to:"/",className:"flex items-center gap-2 group",children:[w.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:"D"}),w.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"D-Lite"})]}),w.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[w.jsx("a",{href:"#features",className:"text-gray-700 hover:text-indigo-600 font-medium transition-colors cursor-pointer",onClick:e=>{var t;e.preventDefault(),null==(t=document.querySelector("#features"))||t.scrollIntoView({behavior:"smooth"})},children:"Features"}),w.jsx("a",{href:"#showcase",className:"text-gray-700 hover:text-indigo-600 font-medium transition-colors cursor-pointer",onClick:e=>{var t;e.preventDefault(),null==(t=document.querySelector("#showcase"))||t.scrollIntoView({behavior:"smooth"})},children:"Showcase"}),w.jsx("a",{href:"#footer",className:"text-gray-700 hover:text-indigo-600 font-medium transition-colors cursor-pointer",onClick:e=>{var t;e.preventDefault(),null==(t=document.querySelector("#footer"))||t.scrollIntoView({behavior:"smooth"})},children:"About"})]}),w.jsx("div",{className:"hidden md:flex items-center gap-4",children:t?w.jsx(r,{to:"/dashboard",className:"px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-600 transition-all duration-300 shadow-md hover:shadow-lg hover:scale-105",children:"Dashboard"}):w.jsxs(w.Fragment,{children:[w.jsx(r,{to:"/login",className:"px-6 py-2.5 text-gray-700 hover:text-gray-900 font-medium transition-colors",children:"Login"}),w.jsx(r,{to:"/register",className:"px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-600 transition-all duration-300 shadow-md hover:shadow-lg hover:scale-105",children:"Get Started"})]})}),w.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>l(!o),"aria-label":"Toggle menu",children:w.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:o?w.jsx("path",{d:"M6 18L18 6M6 6l12 12"}):w.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})})]}),o&&w.jsx("div",{className:"md:hidden mt-4 pb-4 border-t border-gray-200 bg-white/95 backdrop-blur-lg rounded-b-2xl shadow-lg",children:w.jsxs("div",{className:"flex flex-col gap-2 pt-4",children:[w.jsx("a",{href:"#features",className:"px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg transition-colors",onClick:e=>{var t;e.preventDefault(),null==(t=document.querySelector("#features"))||t.scrollIntoView({behavior:"smooth"}),l(!1)},children:"Features"}),w.jsx("a",{href:"#showcase",className:"px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg transition-colors",onClick:e=>{var t;e.preventDefault(),null==(t=document.querySelector("#showcase"))||t.scrollIntoView({behavior:"smooth"}),l(!1)},children:"Showcase"}),w.jsx("a",{href:"#footer",className:"px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg transition-colors",onClick:e=>{var t;e.preventDefault(),null==(t=document.querySelector("#footer"))||t.scrollIntoView({behavior:"smooth"}),l(!1)},children:"About"}),w.jsx("div",{className:"h-px bg-gray-200 my-2"}),t?w.jsx(r,{to:"/dashboard",className:"mx-4 px-4 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium text-center hover:from-indigo-600 hover:to-purple-600 transition-all duration-300",onClick:()=>l(!1),children:"Dashboard"}):w.jsxs(w.Fragment,{children:[w.jsx(r,{to:"/login",className:"px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",onClick:()=>l(!1),children:"Login"}),w.jsx(r,{to:"/register",className:"mx-4 px-4 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium text-center hover:from-indigo-600 hover:to-purple-600 transition-all duration-300",onClick:()=>l(!1),children:"Get Started"})]})]})})]}),w.jsx("div",{className:"h-20"}),w.jsx("section",{className:"relative z-10 px-6 py-20 md:py-32",children:w.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[w.jsx("div",{className:"inline-block mb-6 px-4 py-2 bg-white/70 backdrop-blur-md rounded-full border-2 border-indigo-400/50 text-sm font-medium text-gray-800 shadow-lg ring-1 ring-indigo-500/20",children:"âœ¨ Sentient Chat Experience"}),w.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 mb-6 leading-tight",children:["Chat with",w.jsx("span",{className:"block bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Consciousness"})]}),w.jsx("p",{className:"text-xl md:text-2xl text-gray-600 mb-12 max-w-3xl mx-auto leading-relaxed",children:"Experience messaging reimagined with AI-driven sentient interfaces, quntam room consciousness, and emotionally adaptive design."}),w.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[!t&&w.jsxs(w.Fragment,{children:[w.jsxs(r,{to:"/register",className:"px-8 py-4 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-semibold text-lg hover:from-indigo-600 hover:to-purple-600 transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105 flex items-center gap-2",children:["Start Free",w.jsx("span",{className:"text-xl",children:"â†’"})]}),w.jsx(r,{to:"/login",className:"px-8 py-4 bg-white/80 backdrop-blur-sm text-gray-800 rounded-xl font-semibold text-lg hover:bg-white/90 transition-all duration-300 shadow-lg hover:shadow-xl border border-white/30 flex items-center gap-2",children:"Sign In"})]}),t&&w.jsxs(r,{to:"/chat",className:"px-8 py-4 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-semibold text-lg hover:from-indigo-600 hover:to-purple-600 transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105 flex items-center gap-2",children:["Start Chatting",w.jsx("span",{className:"text-xl",children:"â†’"})]})]})]})}),w.jsx("section",{id:"features",className:"relative z-10 px-6 py-20",children:w.jsxs("div",{className:"max-w-7xl mx-auto",children:[w.jsxs("div",{className:"text-center mb-16",children:[w.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Powerful Features"}),w.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Everything you need for modern, intelligent communication"})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{icon:"ðŸ’¬",title:"Real-time Messaging",description:"Instant messaging with WebSocket technology for seamless conversations"},{icon:"âœ¨",title:"Sentient Interface",description:"AI-driven interface that adapts to room mood and energy levels"},{icon:"ðŸ”’",title:"Secure & Private",description:"End-to-end encryption and privacy-focused architecture"},{icon:"ðŸŽ¨",title:"Visual Identity",description:"Customizable avatars, auras, and personal themes"},{icon:"ðŸŒŠ",title:"quntam Rooms",description:"Conscious spaces that evolve with group dynamics"},{icon:"ðŸ¤–",title:"AI Insights",description:"Smart suggestions and mood analysis powered by AI"}].map((e,t)=>w.jsxs("div",{className:"group p-8 bg-white/60 backdrop-blur-xl rounded-2xl border border-white/30 hover:bg-white/80 transition-all duration-300 shadow-md hover:shadow-xl hover:scale-105",children:[w.jsx("div",{className:"text-5xl mb-4 transform group-hover:scale-110 transition-transform duration-300",children:e.icon}),w.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:e.title}),w.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.description})]},t))})]})}),w.jsx("section",{id:"showcase",className:"relative z-10 px-6 py-20",children:w.jsx("div",{className:"max-w-7xl mx-auto",children:w.jsx("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl border border-white/30 p-8 md:p-12 shadow-2xl",children:w.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[w.jsxs("div",{children:[w.jsx("div",{className:"inline-block mb-4 px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium",children:"Sentient Interface"}),w.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Experience Adaptive Design"}),w.jsx("p",{className:"text-lg text-gray-600 mb-6 leading-relaxed",children:"Watch as the interface adapts in real-time to room mood, energy levels, and user presence. Every interaction shapes the visual experience."}),w.jsx("ul",{className:"space-y-3",children:["Mood-based color adaptation","Energy-driven animations","Presence-aware UI elements","quntam room consciousness"].map((e,t)=>w.jsxs("li",{className:"flex items-center gap-3 text-gray-700",children:[w.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),e]},t))})]}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"aspect-square bg-gradient-to-br from-indigo-400 via-purple-400 to-pink-400 rounded-2xl p-8 flex items-center justify-center shadow-inner",children:w.jsxs("div",{className:"text-center text-white",children:[w.jsx("div",{className:"text-6xl mb-4 animate-softPulse",children:"âœ¨"}),w.jsx("div",{className:"text-2xl font-bold mb-2",children:"Sentient Mode"}),w.jsx("div",{className:"text-sm opacity-90",children:"Adaptive & Alive"})]})}),w.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-purple-300 rounded-full blur-2xl opacity-50 animate-blob"}),w.jsx("div",{className:"absolute -bottom-4 -left-4 w-32 h-32 bg-pink-300 rounded-full blur-2xl opacity-50 animate-blob animation-delay-2000"})]})]})})})}),w.jsx("section",{className:"relative z-10 px-6 py-20",children:w.jsx("div",{className:"max-w-4xl mx-auto text-center",children:w.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-3xl p-12 md:p-16 shadow-2xl",children:[w.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Ready to Experience the Future?"}),w.jsx("p",{className:"text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Join thousands of users experiencing the next generation of messaging"}),!t&&w.jsx(r,{to:"/register",className:"inline-block px-8 py-4 bg-white text-indigo-600 rounded-xl font-semibold text-lg hover:bg-gray-100 transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105",children:"Get Started Free"}),t&&w.jsx(r,{to:"/chat",className:"inline-block px-8 py-4 bg-white text-indigo-600 rounded-xl font-semibold text-lg hover:bg-gray-100 transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105",children:"Start Chatting Now"})]})})}),w.jsx("footer",{id:"footer",className:"relative z-10 bg-gradient-to-br from-gray-900 via-indigo-900 to-purple-900 text-white",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-16",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12",children:[w.jsxs("div",{className:"lg:col-span-1",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-400 to-purple-400 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-lg",children:"D"}),w.jsx("span",{className:"text-2xl font-bold",children:"D-Lite"})]}),w.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed",children:"Experience messaging reimagined with AI-driven sentient interfaces and quntam consciousness."}),w.jsxs("div",{className:"flex gap-4",children:[w.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110","aria-label":"Twitter",children:w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"})})}),w.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110","aria-label":"GitHub",children:w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})}),w.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110","aria-label":"Discord",children:w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})})}),w.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110","aria-label":"LinkedIn",children:w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})})]})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-bold mb-4",children:"Product"}),w.jsx("ul",{className:"space-y-3",children:["Features","Pricing","Integrations","API Docs","Changelog","Roadmap"].map(e=>w.jsx("li",{children:w.jsxs("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors flex items-center gap-2",children:[w.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full"}),e]})},e))})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-bold mb-4",children:"Company"}),w.jsx("ul",{className:"space-y-3",children:["About Us","Careers","Blog","Press Kit","Contact","Partners"].map(e=>w.jsx("li",{children:w.jsxs("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors flex items-center gap-2",children:[w.jsx("span",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full"}),e]})},e))})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-bold mb-4",children:"Stay Updated"}),w.jsx("p",{className:"text-gray-300 mb-4 text-sm",children:"Subscribe to our newsletter for updates and exclusive content."}),w.jsxs("form",{onSubmit:e=>{e.preventDefault(),alert(`Subscribed with: ${c}`),d("")},className:"space-y-3",children:[w.jsx("input",{type:"email",value:c,onChange:e=>d(e.target.value),placeholder:"Enter your email",className:"w-full px-4 py-2.5 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent transition-all",required:!0}),w.jsx("button",{type:"submit",className:"w-full px-4 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-600 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105",children:"Subscribe"})]}),w.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"We respect your privacy. Unsubscribe anytime."})]})]}),w.jsx("div",{className:"pt-8 border-t border-white/10",children:w.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[w.jsx("div",{className:"text-sm text-gray-300",children:"Â© 2026 D-Lite. All rights reserved."}),w.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-sm text-gray-300",children:[w.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy Policy"}),w.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms of Service"}),w.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Cookie Policy"}),w.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Security"}),w.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Support"})]}),w.jsx("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 hover:scale-110","aria-label":"Back to top",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]})})]})})]})},_e=()=>{const[t,s]=e.useState(""),[n,a]=e.useState(""),o=i(),{login:l,loading:c,error:d,clearError:u}=P();return w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-100 via-purple-50 via-pink-50 to-rose-100 flex items-center justify-center p-4 relative overflow-hidden",children:[w.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[w.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"}),w.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-pink-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"})]}),w.jsxs("div",{className:"bg-white/70 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-md p-10 relative z-10 border border-white/30",children:[w.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"Login"}),d&&w.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:d}),w.jsxs("form",{onSubmit:async e=>{e.preventDefault(),u();try{await l(t,n),o("/dashboard")}catch(s){}},className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email or Username"}),w.jsx("input",{type:"text",value:t,onChange:e=>s(e.target.value),required:!0,className:"w-full px-4 py-3 bg-white/80 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent text-gray-800",placeholder:"you@example.com or username"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),w.jsx("input",{type:"password",value:n,onChange:e=>a(e.target.value),required:!0,className:"w-full px-4 py-3 bg-white/80 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent text-gray-800",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),w.jsx("button",{type:"submit",disabled:c,className:"w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-md hover:shadow-lg",children:c?"Logging in...":"Login"})]}),w.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600",children:["Don't have an account?"," ",w.jsx(r,{to:"/register",className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Register"})]})]})]})},Ie=()=>{const[t,s]=e.useState(""),[n,a]=e.useState(""),[o,l]=e.useState(""),c=i(),{register:d,loading:u,error:h,clearError:m}=P();return w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-100 via-purple-50 via-pink-50 to-rose-100 flex items-center justify-center p-4 relative overflow-hidden",children:[w.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[w.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"}),w.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-pink-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"})]}),w.jsxs("div",{className:"bg-white/70 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-md p-10 relative z-10 border border-white/30",children:[w.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"Register"}),h&&w.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:h}),w.jsxs("form",{onSubmit:async e=>{e.preventDefault(),m();try{await d(t,n,o),c("/dashboard")}catch(s){}},className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),w.jsx("input",{type:"text",value:t,onChange:e=>s(e.target.value),required:!0,minLength:3,maxLength:30,className:"w-full px-4 py-3 bg-white/80 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent text-gray-800",placeholder:"johndoe"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),w.jsx("input",{type:"email",value:n,onChange:e=>a(e.target.value),required:!0,className:"w-full px-4 py-3 bg-white/80 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent text-gray-800",placeholder:"you@example.com"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),w.jsx("input",{type:"password",value:o,onChange:e=>l(e.target.value),required:!0,minLength:6,className:"w-full px-4 py-3 bg-white/80 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent text-gray-800",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),w.jsx("button",{type:"submit",disabled:u,className:"w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-md hover:shadow-lg",children:u?"Creating account...":"Register"})]}),w.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600",children:["Already have an account?"," ",w.jsx(r,{to:"/login",className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Login"})]})]})]})},Le=e.memo(()=>{const{backgroundGradient:t,pulseSpeed:s}=pe();return e.useEffect(()=>{const e=Array.isArray(t)?`linear-gradient(135deg, ${t.join(", ")})`:t||"linear-gradient(135deg, #f5f3ff 0%, #ede9fe 50%, #ddd6fe 100%)";document.documentElement.style.setProperty("--sentient-bg",e),document.documentElement.style.setProperty("--sentient-pulse-speed",`${s||1}s`)},[t,s]),w.jsx("div",{className:"fixed inset-0 -z-10 transition-all duration-1000",style:{background:Array.isArray(t)?`linear-gradient(135deg, ${t.join(", ")})`:t||"linear-gradient(135deg, #f5f3ff 0%, #ede9fe 50%, #ddd6fe 100%)",backgroundSize:"200% 200%",animation:"sentientBreathe 20s ease-in-out infinite"}})});Le.displayName="SentientBackgroundLayer";const Pe=e.memo(({children:e,onLogout:t,className:s=""})=>{const{focusModeActive:r}=pe(),i=r?"w-72":"w-80";return w.jsx("div",{className:`${i} h-full flex flex-col bg-white/50 backdrop-blur-xl border-r border-gray-200/50 transition-all duration-300 ease-in-out ux-panel ux-panel-sidebar ux-focus-hidden ${s}`,style:{opacity:r?.95:1},children:w.jsxs("div",{className:"h-full flex flex-col",children:[w.jsx("div",{className:"px-5 py-4 border-b border-gray-200/60 bg-white/30",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2.5",children:[w.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-xl flex items-center justify-center shadow-md",children:w.jsx("span",{className:"text-white font-bold text-lg",children:"D"})}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-base font-bold text-gray-900",children:"D-Lite"}),w.jsx("p",{className:"text-xs text-gray-500",children:"Messaging"})]})]}),t&&w.jsx("button",{onClick:t,className:"px-3 py-1.5 text-xs font-medium text-gray-600 hover:text-gray-900 hover:bg-white/60 rounded-lg transition-all border border-transparent hover:border-gray-200",title:"Logout",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})}),w.jsx("div",{className:"flex-1 overflow-hidden p-4",children:e})]})})});Pe.displayName="SoftSidebar";const Re=e.memo(({header:e,children:t,input:s,focusMode:r=!1})=>w.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden bg-gradient-to-br from-gray-50/50 to-white/50 transition-all duration-300 ux-focus-chat "+(r?"opacity-95":"opacity-100"),children:[e&&w.jsx("div",{className:"px-6 py-4 border-b border-gray-200/60 bg-white/40 backdrop-blur-sm",children:e}),w.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",style:{padding:"calc(1.5rem * var(--ux-spacing-multiplier))"},children:w.jsx("div",{className:"max-w-4xl mx-auto flex flex-col",style:{gap:"var(--ux-chat-gap)"},children:t})}),s&&w.jsx("div",{className:"px-6 py-4 border-t border-gray-200/60 bg-white/40 backdrop-blur-sm ux-input-container",style:{paddingTop:"calc(1rem * var(--ux-spacing-multiplier))"},children:w.jsx("div",{className:"max-w-4xl mx-auto",children:s})})]}));Re.displayName="ChatPanel";const Ve=e.memo(({children:e,isCollapsed:t=!1})=>t?null:w.jsxs("div",{className:"w-64 flex-shrink-0 bg-white/30 backdrop-blur-md rounded-l-3xl border-l border-white/30 shadow-soft p-4 transition-all duration-[400ms] ease-in-out ux-panel ux-focus-hidden",children:[w.jsx("div",{className:"mb-4",children:w.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Active Now"})}),w.jsx("div",{className:"space-y-2",children:e})]}));Ve.displayName="PresencePanel";const Ue=e.memo(({sidebarContent:e,chatHeader:t,chatContent:s,chatInput:r,presenceContent:i,onLogout:n})=>{const{focusModeActive:a,uiMode:o}=pe();return w.jsxs("div",{className:"flex h-screen w-screen overflow-hidden relative",children:[w.jsx(Le,{}),w.jsx(Pe,{onLogout:n,children:e}),w.jsx(Re,{header:t,input:r,focusMode:a,children:s}),"minimal"!==o&&"whisper"!==o&&w.jsx(Ve,{isCollapsed:a,children:i})]})});Ue.displayName="AppLayout";const De=e.memo(({userId:e,avatarUrl:t,name:s,auraColor:r="#a5f3fc",size:i="md",online:n=!1,heatLevel:a="low",className:o=""})=>{return w.jsxs("div",{className:`relative ${o}`,children:[w.jsx("div",{className:`absolute inset-0 rounded-full ${{sm:"ring-1",md:"ring-2",lg:"ring-3",xl:"ring-4"}[i]} transition-all duration-500`,style:{borderColor:r,boxShadow:(()=>{switch(a){case"high":return"0 0 20px rgba(139, 92, 246, 0.6)";case"medium":return"0 0 15px rgba(139, 92, 246, 0.4)";default:return"0 0 10px rgba(139, 92, 246, 0.2)"}})(),animation:"softPulse 3s ease-in-out infinite"}}),w.jsx("div",{className:`${{sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-20 h-20"}[i]} rounded-full overflow-hidden bg-gradient-to-br from-indigo-200 to-purple-200 flex items-center justify-center text-white font-medium relative z-10`,children:t?w.jsx("img",{src:t,alt:s||"User",className:"w-full h-full object-cover",loading:"lazy"}):w.jsx("span",{className:"text-xs",children:(l=s,l?l.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"?")})}),n&&w.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white",style:{boxShadow:"0 0 8px rgba(34, 197, 94, 0.6)"}})]});var l});De.displayName="AuraAvatar";const Fe=e=>String((null==e?void 0:e.id)||(null==e?void 0:e._id)||""),Oe=e=>(null==e?void 0:e.username)||(null==e?void 0:e.name)||"Unknown User",ze=e.memo(()=>{const{users:t,selectedUser:s,setSelectedUser:r,onlineUsers:i,conversations:n}=ee(),{getPresence:a}=z(),{signals:o}=Ce(),{prioritizedChats:l,recentChats:c,frequentChats:d,spacing:u,shouldShowSearch:h,nextPredictedChat:m,trackChatAccess:g}=o,[p,x]=e.useState(""),[f,v]=e.useState([]),[y,b]=e.useState(!1),j=e.useRef(null),N=Fe(s),S=e.useCallback(()=>{j.current&&(clearTimeout(j.current),j.current=null)},[]);e.useEffect(()=>S,[S]);const C=e.useCallback(e=>i.has(e)||i.has(String(e)),[i]),k=e.useMemo(()=>{const e=new Map;return t.forEach(t=>{const s=Fe(t);s&&e.set(s,t)}),e},[t]),E=e.useMemo(()=>{const e=new Map;let t=0;const s=s=>{s.forEach(s=>{const r=String(s);r&&!e.has(r)&&(e.set(r,t),t+=1)})};return s(l||[]),s(c||[]),s(d||[]),e},[l,c,d]),T=e.useCallback((e,t)=>{var s,r;const i=Fe(e),a=Fe(t),o=E.has(i)?E.get(i):Number.MAX_SAFE_INTEGER,l=E.has(a)?E.get(a):Number.MAX_SAFE_INTEGER;if(o!==l)return o-l;const c=(null==(s=n[i])?void 0:s.unread_count)||0,d=(null==(r=n[a])?void 0:r.unread_count)||0;return c!==d?d-c:Oe(e).localeCompare(Oe(t))},[n,E]),A=e.useMemo(()=>{const e=[...t].sort(T);return{online:e.filter(e=>C(Fe(e))),offline:e.filter(e=>!C(Fe(e)))}},[t,T,C]),M=e.useMemo(()=>c.map(e=>k.get(String(e))).filter(e=>e&&Fe(e)!==N).slice(0,4),[c,N,k]),_=e.useCallback(e=>{const t=Fe(e);t&&(N!==t&&r(e),g(t),x(""),v([]),S())},[S,N,r,g]),L=e.useCallback(e=>{const t=Fe(e);t&&t!==N&&(S(),j.current=setTimeout(()=>{_(e)},450))},[S,_,N]),P=e.useMemo(()=>"compact"===u?"gap-2":"relaxed"===u?"gap-4":"gap-3",[u]),R=e=>{var t;const s=a(e.id||e._id),r=Fe(e),i=C(r),o=N===r,l=(null==(t=n[r])?void 0:t.unread_count)||0,c=m&&String(m)===r;return w.jsxs("button",{onClick:()=>_(e),className:"w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 relative group ux-touch-target "+(o?"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 shadow-sm":c?"bg-indigo-50/70 border border-indigo-100 hover:border-indigo-200/60 hover:shadow-sm":"bg-white/50 hover:bg-white/80 border border-transparent hover:border-gray-200/60 hover:shadow-sm"),onMouseEnter:()=>L(e),onMouseLeave:S,children:[w.jsxs("div",{className:"relative flex-shrink-0",children:[w.jsx(De,{userId:r,avatarUrl:e.avatarUrl,name:Oe(e),auraColor:null==s?void 0:s.auraColor,size:"md",online:i,heatLevel:null==s?void 0:s.heatLevel}),l>0&&w.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full min-w-[20px] h-5 flex items-center justify-center px-1.5 shadow-md ring-2 ring-white",children:l>99?"99+":l})]}),w.jsxs("div",{className:"flex-1 text-left min-w-0",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[w.jsx("span",{className:"font-semibold text-gray-800 text-sm truncate",children:Oe(e)}),i&&w.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-green-500"}),c&&w.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-indigo-100 text-indigo-600 font-semibold",children:"Next"})]}),(null==s?void 0:s.state)?w.jsx("div",{className:"text-xs text-gray-600 truncate",children:s.state}):i?null:w.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:[w.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("circle",{cx:"10",cy:"10",r:"8",opacity:"0.3"})}),"Offline"]})]}),!l&&w.jsx("svg",{className:"w-4 h-4 transition-opacity "+(o?"opacity-60":"opacity-0 group-hover:opacity-40"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},r)};return w.jsxs("div",{className:`h-full flex flex-col ${P}`,children:[w.jsxs("div",{children:[w.jsxs("div",{className:"relative",children:[w.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),w.jsx("input",{type:"text",placeholder:"Search for users...",value:p,onChange:e=>(async e=>{if(x(e),e.trim().length<2)return v([]),void b(!1);try{b(!0);const t=await I(e);v(t.users||[])}catch(t){v([])}finally{b(!1)}})(e.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200/60 bg-white/70 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-indigo-400/50 focus:border-indigo-400 placeholder-gray-400 text-sm transition-all ux-touch-target"})]}),h&&!p&&t.length>0&&w.jsx("div",{className:"mt-2 text-[11px] text-gray-500 px-1",children:"Searching now can reduce click depth."})]}),!p&&M.length>0&&w.jsxs("div",{className:"rounded-xl border border-indigo-100/80 bg-indigo-50/60 px-3 py-2",children:[w.jsx("div",{className:"text-[11px] font-semibold text-indigo-600 uppercase tracking-wide mb-2",children:"Quick Switch"}),w.jsx("div",{className:"flex flex-wrap gap-1.5",children:M.map(e=>{const t=Fe(e);return w.jsx("button",{type:"button",onClick:()=>_(e),onMouseEnter:()=>L(e),onMouseLeave:S,className:"px-2.5 py-1.5 rounded-lg bg-white/80 hover:bg-white border border-indigo-100 text-xs text-gray-700 transition-all ux-touch-target",children:Oe(e)},t)})})]}),p.trim().length>=2&&w.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl border border-gray-200/60 shadow-sm overflow-hidden",children:[w.jsx("div",{className:"px-4 py-2.5 bg-gray-50/80 border-b border-gray-200/60",children:w.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Search Results"})}),w.jsx("div",{className:"p-2 max-h-80 overflow-y-auto",children:y?w.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[w.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500 mb-3"}),w.jsx("div",{className:"text-sm",children:"Searching..."})]}):f.length>0?w.jsx("div",{className:"space-y-1",children:f.map(e=>w.jsxs("button",{onClick:()=>_(e),className:"w-full flex items-center gap-3 p-2.5 rounded-lg hover:bg-indigo-50/80 transition-all group ux-touch-target",children:[w.jsx(De,{userId:Fe(e),avatarUrl:e.avatarUrl,name:Oe(e),size:"sm",online:C(Fe(e))}),w.jsxs("div",{className:"flex-1 text-left min-w-0",children:[w.jsx("div",{className:"font-medium text-gray-800 text-sm truncate",children:Oe(e)}),w.jsx("div",{className:"text-xs text-gray-500 truncate",children:e.email})]}),w.jsx("svg",{className:"w-4 h-4 text-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},Fe(e)))}):w.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[w.jsx("svg",{className:"w-12 h-12 mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),w.jsx("div",{className:"text-sm font-medium",children:"No users found"}),w.jsx("div",{className:"text-xs mt-1",children:"Try a different search term"})]})})]}),!p&&0===t.length&&w.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-100",children:w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("svg",{className:"w-5 h-5 text-indigo-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-1",children:"Start Your First Conversation"}),w.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:"Search for users above to begin chatting. Your conversations are private and secure."})]})]})}),!p&&t.length>0&&w.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 custom-scrollbar",children:[A.online.length>0&&w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2 px-2 mb-2",children:[w.jsx("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-green-500 animate-pulse"}),w.jsx("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Online"}),w.jsx("span",{className:"text-xs text-gray-400 font-semibold",children:A.online.length})]}),w.jsx("div",{className:"space-y-1.5",children:A.online.map(R)})]}),A.offline.length>0&&w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2 px-2 mb-2",children:[w.jsx("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-gray-300"}),w.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Recent"}),w.jsx("span",{className:"text-xs text-gray-400 font-semibold",children:A.offline.length})]}),w.jsx("div",{className:"space-y-1.5",children:A.offline.map(R)})]})]})]})});ze.displayName="UsersList";const $e=e.memo(({message:e,isOwn:t,senderName:s,mood:r="balanced",timestamp:i,attentionType:n=null})=>{const a=(e=>{const t={calm:{borderRadius:"1rem",padding:"0.75rem 1rem"},focused:{borderRadius:"0.75rem",padding:"0.75rem 1rem"},meditative:{borderRadius:"1.25rem",padding:"0.875rem 1.125rem"},balanced:{borderRadius:"1rem",padding:"0.75rem 1rem"},chaotic:{borderRadius:"0.875rem",transform:"rotate(-0.5deg)",padding:"0.75rem 1rem"},deep:{borderRadius:"1.5rem",padding:"0.875rem 1.125rem"},funny:{borderRadius:"1rem",padding:"0.75rem 1rem"}};return t[e]||t.balanced})(r),o={mention:"ux-attention-mention ring-1 ring-indigo-300/60",reply:"ux-attention-reply ring-1 ring-purple-200/70","focus-chat":"ux-attention-focus-chat ring-1 ring-gray-200/80"}[n]||"";return w.jsx("div",{className:`flex ${t?"justify-end":"justify-start"} mb-2 ux-smooth-transition`,children:w.jsxs("div",{className:`max-w-[70%] rounded-lg px-[1.125rem] py-[0.875rem] ${t?"bg-gradient-to-br from-indigo-400 to-purple-400 text-white":"bg-white/70 backdrop-blur-sm text-gray-800"} shadow-md transition-all duration-300 hover:shadow-lg ${o}`,style:{borderRadius:a.borderRadius,padding:a.padding,transform:a.transform||"none"},children:[!t&&s&&w.jsx("div",{className:"text-xs font-medium mb-1 opacity-75",children:s}),w.jsx("div",{className:"text-sm leading-[1.6] whitespace-pre-wrap break-words",children:e.content||e.text}),i&&w.jsx("div",{className:"text-xs mt-1 "+(t?"text-white/70":"text-gray-500"),children:new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})})});$e.displayName="ChatBubble";const qe=e.memo(()=>{const{messages:e,selectedUser:t}=ee(),{user:s}=P(),{currentMood:r}=pe(),{signals:i}=Ce(),{spacing:n,focusMode:a}=i,o=((null==s?void 0:s.username)||(null==s?void 0:s.name)||"").toLowerCase(),l="relaxed"===n?"space-y-3":"compact"===n?"space-y-1.5":"space-y-2";return t?e&&0!==e.length?w.jsx("div",{className:l,children:e.map(e=>{const i=(e.sender_id||e.senderId)===((null==s?void 0:s.id)||(null==s?void 0:s._id)),n=i?"You":(null==t?void 0:t.username)||(null==t?void 0:t.name)||"Unknown",l=String(e.content||e.text||"").toLowerCase(),c=!i&&o.length>0&&l.includes(`@${o}`),d=Boolean(e.reply_to||e.replyTo||e.reply_to_id||e.parent_id);let u=null;return c?u="mention":d?u="reply":a&&!i&&(u="focus-chat"),w.jsx($e,{message:e,isOwn:i,senderName:i?null:n,mood:r,timestamp:e.timestamp||e.createdAt,attentionType:u},e._id||e.id)})}):w.jsx("div",{className:"flex items-center justify-center h-full",children:w.jsxs("div",{className:"text-center max-w-md px-6",children:[w.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-full flex items-center justify-center",children:w.jsx("svg",{className:"w-10 h-10 text-indigo-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),w.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No messages yet"}),w.jsxs("p",{className:"text-sm text-gray-500",children:["Start the conversation with ",(null==t?void 0:t.username)||(null==t?void 0:t.name)]})]})}):w.jsx("div",{className:"flex items-center justify-center h-full",children:w.jsxs("div",{className:"text-center max-w-md px-6",children:[w.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full flex items-center justify-center",children:w.jsx("svg",{className:"w-12 h-12 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),w.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Welcome to D-Lite"}),w.jsx("p",{className:"text-sm text-gray-500 leading-relaxed",children:"Select a conversation from the sidebar or search for users to start chatting."})]})})});qe.displayName="MessageList";const Be=({onSendMessage:t})=>{const{selectedUser:s,selectedGroup:r}=ee(),{user:i}=P(),{smartSuggestions:n,analyzeInput:a}=re(),{roomMood:o,vibeState:l}=pe(),{signals:c}=Ce(),{inputMode:d,isUserPausing:u,shouldShowCompositionAssist:h,focusMode:m,focusModeSuggestion:g,toggleFocusMode:p,trackTyping:x,dismissFocusModeSuggestion:f}=c,[v,y]=e.useState(""),[b,j]=e.useState(!1),N=e.useRef(null),S=e.useRef(null),C=e.useRef(null),k=(null==i?void 0:i.id)||(null==i?void 0:i._id)||null,E=(null==s?void 0:s.id)||(null==s?void 0:s._id)||null,T=(null==r?void 0:r.id)||(null==r?void 0:r._id)||null,A=e.useMemo(()=>"expanded"===d?3:"collapsed"===d?1:2,[d]),M=e.useMemo(()=>(n||[]).filter(Boolean).slice(0,3),[n]),_=e.useMemo(()=>{const e=[],t=String(o||"").toLowerCase(),s=String(l||"").toLowerCase();return"deep"!==t&&"calm"!==t&&"contemplative"!==s&&"philosophical"!==s||e.push({id:"expand-thought",label:"Expand thought",apply:e=>e.trim()?`${e.trim()}\n- `:"Let me break this down:"}),"energetic"!==t&&"chaotic"!==t&&"excited"!==s&&"joyful"!==s||e.push({id:"emoji-shortcut",label:"Emoji shortcut",apply:e=>`${e}${e.endsWith(" ")?"":" "}:)`}),e},[o,l]),I=e.useCallback(e=>{k&&(E||T)&&(e?L.sendTyping(E,T):L.sendStopTyping(E,T))},[k,T,E]),R=e.useCallback(async()=>{const e=v.trim();if(e&&k&&(E||T))try{L.sendMessage({sender_id:k,receiver_id:E,group_id:T,content:e}),await K(k,E,e,T),y(""),j(!1),I(!1),x({isTyping:!1,contentLength:0}),t&&t(e)}catch(s){}},[k,I,T,v,t,E,x]),V=e.useCallback(e=>{const t=e.trim().length>0;t&&!b&&(j(!0),I(!0)),!t&&b&&(j(!1),I(!1)),x({isTyping:t,contentLength:e.length}),S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{j(!1),I(!1),x({isTyping:!1,contentLength:e.length})},1e3),C.current&&clearTimeout(C.current),e.trim().length>=8&&(C.current=setTimeout(()=>{a(e)},700))},[a,I,b,x]),U=e.useCallback(e=>{var t;y(t=>e.apply(t)),null==(t=N.current)||t.focus()},[]);return e.useEffect(()=>()=>{S.current&&clearTimeout(S.current),C.current&&clearTimeout(C.current),x({isTyping:!1,contentLength:0})},[x]),w.jsxs("div",{className:"flex flex-col gap-2 ux-input-container",children:[g&&w.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-amber-200 bg-amber-50 text-amber-700 text-xs",children:[w.jsx("span",{className:"flex-1",children:g.message}),w.jsx("button",{type:"button",onClick:()=>p(!0),className:"px-2 py-1 rounded-md bg-amber-100 hover:bg-amber-200 transition-colors",children:"Enable"}),w.jsx("button",{type:"button",onClick:f,className:"px-2 py-1 rounded-md hover:bg-amber-100 transition-colors","aria-label":"Dismiss focus suggestion",children:"Later"})]}),h&&u&&M.length>0&&w.jsx("div",{className:"flex flex-wrap gap-2 ux-panel-suggestions",children:M.map((e,t)=>w.jsx("button",{type:"button",onClick:()=>y(e),className:"px-3 py-1.5 rounded-lg bg-indigo-50 hover:bg-indigo-100 text-indigo-700 text-xs border border-indigo-100 transition-all ux-touch-target",children:e},`${e}-${t}`))}),_.length>0&&"collapsed"!==d&&w.jsx("div",{className:"flex flex-wrap gap-2 ux-panel-quick-actions",style:{opacity:"var(--ux-actions-opacity)"},children:_.map(e=>w.jsx("button",{type:"button",onClick:()=>U(e),className:"px-3 py-1.5 rounded-lg bg-white/80 hover:bg-white border border-gray-200 text-xs text-gray-700 transition-all ux-touch-target",children:e.label},e.id))}),w.jsxs("div",{className:"flex items-end gap-3",children:[w.jsx("div",{className:"flex-1 relative",children:w.jsx("textarea",{ref:N,value:v,onChange:e=>{const t=e.target.value;y(t),V(t)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),R())},placeholder:"Type your message...",className:"w-full px-4 py-3 bg-white/90 backdrop-blur-sm border border-gray-200/60 rounded-xl resize-none focus:outline-none focus:ring-2 focus:ring-indigo-400/50 focus:border-indigo-400 text-gray-800 placeholder-gray-400 transition-all shadow-sm ux-input-expandable",rows:A,style:{minHeight:"48px",maxHeight:"160px"}})}),w.jsx("button",{type:"button",onClick:()=>p(!m),className:"flex-shrink-0 h-12 px-3 rounded-xl text-xs font-semibold border transition-all ux-touch-target "+(m?"bg-indigo-600 text-white border-indigo-600":"bg-white/90 text-indigo-700 border-indigo-200 hover:bg-indigo-50"),title:m?"Exit focus mode":"Enter focus mode",children:"Focus"}),w.jsx("button",{onClick:R,disabled:!v.trim(),className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-500 text-white rounded-xl font-medium hover:from-indigo-600 hover:to-purple-600 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center group ux-touch-target",title:"Send message",children:w.jsx("svg",{className:"w-5 h-5 transform group-hover:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})},Ge=e.memo(()=>{const{currentMood:e,roomMood:t,energyLevel:s}=pe(),r={calm:"ðŸ§˜",focused:"ðŸŽ¯",meditative:"âœ¨",balanced:"âš–ï¸",chaotic:"ðŸŒ€",deep:"ðŸŒŠ",funny:"ðŸ˜„",neutral:"ðŸ˜"},i=e||t||"balanced";return w.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-white/40 backdrop-blur-sm rounded-lg border border-white/30",children:[w.jsx("div",{className:"text-2xl",children:r[i]||r.balanced}),w.jsxs("div",{className:"flex-1",children:[w.jsx("div",{className:"text-sm font-medium text-gray-700",children:{calm:"Calm",focused:"Focused",meditative:"Meditative",balanced:"Balanced",chaotic:"Chaotic",deep:"Deep",funny:"Funny",neutral:"Neutral"}[i]||"Balanced"}),w.jsxs("div",{className:"text-xs text-gray-500",children:["Energy: ",Math.round(s),"%"]})]}),w.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:w.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full transition-all duration-500",style:{width:`${Math.min(s,100)}%`}})})]})});Ge.displayName="MoodHeader";const He=e.memo(({size:e="md"})=>{const{energyLevel:t,heatLevel:s}=pe();return w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:`${{sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"}[e]} ${(()=>{switch(s){case"high":return"bg-red-400";case"medium":return"bg-yellow-400";default:return"bg-blue-400"}})()} rounded-full transition-all duration-500`,style:{boxShadow:`0 0 ${t/10}px currentColor`,animation:"softPulse 2s ease-in-out infinite"}}),w.jsxs("span",{className:"text-xs text-gray-600 font-medium",children:[Math.round(t),"%"]})]})});He.displayName="EnergyIndicator";const We=()=>{const t=i(),{user:s,token:r,logout:n}=P(),{users:a,selectedUser:o,messages:l,setUsers:c,setMessages:d,setConversations:u,addMessage:h,updateOnlineUsers:m,addOnlineUser:g,removeOnlineUser:p}=ee(),{getPresence:x}=z(),[f,v]=e.useState(!0);if(e.useEffect(()=>{if(!r||!s)return void t("/login");return(async()=>{try{await L.connect(r),L.setupPresenceTracking({onOnlineUsersUpdate:e=>{m(e)},onUserConnected:e=>{g(e)},onUserDisconnected:e=>{p(e)}}),L.onMessage(async e=>{h(e);const t=s.id||s._id;if(e.receiver_id===t)try{const e=await J(t);u(e||[])}catch(r){}});const e=s.id||s._id,t=await J(e);u(t||[]);const i=(t||[]).map(e=>e.user_id);if(i.length>0){const e=i.map(e=>_(e).catch(e=>null)),t=(await Promise.all(e)).filter(e=>e&&e.user).map(e=>e.user);c(t)}else c([]);v(!1)}catch(e){v(!1)}})(),()=>{L.offMessage()}},[r,s,t,c,u,m,g,p,h]),e.useEffect(()=>{(async()=>{if(o&&s)try{const t=s.id||s._id,r=o.id||o._id,i=await X(t,r);d(i.messages||[]);const n=(i.messages||[]).filter(e=>e.receiver_id===t&&!e.read);for(const s of n)try{await Z(s._id||s.id)}catch(e){}if(n.length>0){const e=await J(t);u(e||[])}}catch(e){}})()},[o,s,d]),f)return w.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-indigo-100 via-purple-50 to-pink-50",children:w.jsx("div",{className:"text-gray-600",children:"Loading..."})});const y=o?x(o.id||o._id):null;return w.jsx(Ue,{sidebarContent:w.jsx(ze,{}),chatHeader:o?w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx(De,{userId:o.id||o._id,avatarUrl:o.avatarUrl,name:o.username||o.name,auraColor:null==y?void 0:y.auraColor,size:"md",online:!0,heatLevel:null==y?void 0:y.heatLevel}),w.jsxs("div",{children:[w.jsx("div",{className:"font-semibold text-gray-900 text-base",children:o.username||o.name}),w.jsx("div",{className:"flex items-center gap-2 text-xs",children:(null==y?void 0:y.state)?w.jsx("span",{className:"text-gray-600",children:y.state}):w.jsx("span",{className:"text-gray-500",children:"Click to view profile"})})]})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(Ge,{}),w.jsx(He,{})]})]}):w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Messages"}),w.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Select a conversation or search for users"})]}),w.jsx(Ge,{})]}),chatContent:w.jsx(qe,{}),chatInput:o?w.jsx(Be,{}):null,presenceContent:w.jsx("div",{className:"space-y-2",children:w.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Active Users"})}),onLogout:n})},Ye=()=>{const e=i(),{user:t,logout:s}=P();return w.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-100 via-purple-50 via-pink-50 to-rose-100 p-8",children:w.jsx("div",{className:"max-w-6xl mx-auto",children:w.jsxs("div",{className:"bg-white/70 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/30",children:[w.jsxs("div",{className:"flex items-center justify-between mb-8",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Dashboard"}),w.jsxs("p",{className:"text-gray-600 mt-1",children:["Welcome, ",(null==t?void 0:t.username)||(null==t?void 0:t.name),"!"]})]}),w.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Logout"})]}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Quick Actions"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[w.jsxs("button",{onClick:()=>e("/chat"),className:"p-6 bg-gradient-to-br from-indigo-400 to-purple-400 text-white rounded-lg hover:from-indigo-500 hover:to-purple-500 transition-all duration-300 shadow-md hover:shadow-lg",children:[w.jsx("div",{className:"text-2xl mb-2",children:"ðŸ’¬"}),w.jsx("div",{className:"font-semibold",children:"Open Chat"}),w.jsx("div",{className:"text-xs mt-1 opacity-90",children:"View conversations & messages"})]}),w.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-400 to-pink-400 text-white rounded-lg opacity-75",children:[w.jsx("div",{className:"text-2xl mb-2",children:"ðŸ‘¥"}),w.jsx("div",{className:"font-semibold",children:"My Profile"}),w.jsx("div",{className:"text-xs mt-1 opacity-90",children:"Coming soon"})]}),w.jsxs("div",{className:"p-6 bg-gradient-to-br from-pink-400 to-rose-400 text-white rounded-lg opacity-75",children:[w.jsx("div",{className:"text-2xl mb-2",children:"âš™ï¸"}),w.jsx("div",{className:"font-semibold",children:"Settings"}),w.jsx("div",{className:"text-xs mt-1 opacity-90",children:"Coming soon"})]})]})]}),w.jsxs("div",{className:"mt-8 bg-indigo-50 rounded-lg p-6 border border-indigo-100",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"ðŸ”’ Privacy & Security"}),w.jsx("p",{className:"text-sm text-gray-600",children:"Your conversations are private and secure. Only you and the people you chat with can see your messages."})]})]})})})};function Qe(){const{isAuthenticated:t,initAuth:s}=P();return e.useEffect(()=>{const e=(()=>{const e=[];return Ae.forEach(t=>{Te[t]||e.push(t)}),e.length,{isValid:0===e.length,missing:e,env:{AUTH_SERVICE_URL:"https://d-lite-auth-service-production.up.railway.app",CHAT_SERVICE_URL:"https://d-lite-chat-service.onrender.com",SOCKET_GATEWAY_URL:"https://d-lite-socket-gateway-production.up.railway.app",IDENTITY_SERVICE_URL:"https://d-lite-identity-system.onrender.com",QUANTUM_ROOM_ENGINE_URL:"http://localhost:3004",AI_ENGINE_URL:"https://d-lite-ai-engine.onrender.com",PRESENCE_ENGINE_URL:"https://d-lite-presence-engine.onrender.com"}}})();e.isValid||S.warn("Environment validation failed",{missing:e.missing}),s().catch(e=>{S.error("Failed to initialize auth",{error:e.message})})},[s]),w.jsx(Ee,{children:w.jsx(n,{children:w.jsx($,{children:w.jsx(se,{children:w.jsx(xe,{children:w.jsx(ke,{children:w.jsxs(a,{children:[w.jsx(o,{path:"/",element:t?w.jsx(l,{to:"/dashboard"}):w.jsx(Me,{})}),w.jsx(o,{path:"/login",element:t?w.jsx(l,{to:"/dashboard"}):w.jsx(_e,{})}),w.jsx(o,{path:"/register",element:t?w.jsx(l,{to:"/dashboard"}):w.jsx(Ie,{})}),w.jsx(o,{path:"/dashboard",element:t?w.jsx(Ye,{}):w.jsx(l,{to:"/login"})}),w.jsx(o,{path:"/chat",element:t?w.jsx(We,{}):w.jsx(l,{to:"/login"})})]})})})})})})})}j.createRoot(document.getElementById("root")).render(w.jsx(s.StrictMode,{children:w.jsx(Qe,{})}));
